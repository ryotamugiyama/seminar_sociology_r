<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 回帰分析の基礎 | Rによる社会調査データ分析の手引き</title>
  <meta name="description" content="This is the document for the class Seminar in Sociology held in Department of Political Studies, Gakushuin University. Anyone can freely use this as reference." />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 回帰分析の基礎 | Rによる社会調査データ分析の手引き" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is the document for the class Seminar in Sociology held in Department of Political Studies, Gakushuin University. Anyone can freely use this as reference." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 回帰分析の基礎 | Rによる社会調査データ分析の手引き" />
  
  <meta name="twitter:description" content="This is the document for the class Seminar in Sociology held in Department of Political Studies, Gakushuin University. Anyone can freely use this as reference." />
  

<meta name="author" content="麦山 亮太（学習院大学法学部政治学科）/ Ryota Mugiyama (Department of Political Studies, Gakushuin University)" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="tabulate.html"/>
<link rel="next" href="regression_advanced.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Rによる社会調査データ分析の手引き</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path=""><a href="#%E3%81%BE%E3%81%88%E3%81%8C%E3%81%8D"><i class="fa fa-check"></i>まえがき</a></li>
<li class="chapter" data-level="1" data-path="plan.html"><a href="plan.html"><i class="fa fa-check"></i><b>1</b> 研究計画を立てる</a>
<ul>
<li class="chapter" data-level="1.1" data-path="07-regression_basic.html"><a href="#%E7%A0%94%E7%A9%B6%E8%A8%88%E7%94%BB%E3%81%A8%E3%81%AF"><i class="fa fa-check"></i><b>1.1</b> 研究計画とは</a></li>
<li class="chapter" data-level="1.2" data-path="07-regression_basic.html"><a href="#%E7%A0%94%E7%A9%B6%E8%A8%88%E7%94%BB%E3%81%AE%E6%A7%8B%E6%88%90"><i class="fa fa-check"></i><b>1.2</b> 研究計画の構成</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="plan.html"><a href="plan.html#plan_background"><i class="fa fa-check"></i><b>1.2.1</b> 研究背景</a></li>
<li class="chapter" data-level="1.2.2" data-path="plan.html"><a href="plan.html#plan_question"><i class="fa fa-check"></i><b>1.2.2</b> 研究目的・問い</a></li>
<li class="chapter" data-level="1.2.3" data-path="plan.html"><a href="plan.html#plan_method"><i class="fa fa-check"></i><b>1.2.3</b> 方法</a></li>
<li class="chapter" data-level="1.2.4" data-path="plan.html"><a href="plan.html#plan_reference"><i class="fa fa-check"></i><b>1.2.4</b> 参考文献</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="07-regression_basic.html"><a href="#%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E8%AA%BF%E6%9F%BB%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E9%81%B8%E5%AE%9A"><i class="fa fa-check"></i><b>1.3</b> 使用する調査データの選定</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="07-regression_basic.html"><a href="#%E5%80%8B%E7%A5%A8%E3%83%87%E3%83%BC%E3%82%BF%E3%81%A8%E3%81%AF%E4%BD%95%E3%81%8B"><i class="fa fa-check"></i><b>1.3.1</b> 個票データとは何か</a></li>
<li class="chapter" data-level="1.3.2" data-path="plan.html"><a href="plan.html#jgss"><i class="fa fa-check"></i><b>1.3.2</b> JGSS</a></li>
<li class="chapter" data-level="1.3.3" data-path="07-regression_basic.html"><a href="#jgss%E4%BB%A5%E5%A4%96%E3%81%AE%E6%97%A5%E6%9C%AC%E3%81%AE%E7%A4%BE%E4%BC%9A%E8%AA%BF%E6%9F%BB"><i class="fa fa-check"></i><b>1.3.3</b> JGSS以外の日本の社会調査</a></li>
<li class="chapter" data-level="1.3.4" data-path="07-regression_basic.html"><a href="#%E6%97%A5%E6%9C%AC%E4%BB%A5%E5%A4%96%E3%81%AE%E7%A4%BE%E4%BC%9A%E8%AA%BF%E6%9F%BB%E3%83%87%E3%83%BC%E3%82%BF"><i class="fa fa-check"></i><b>1.3.4</b> 日本以外の社会調査データ</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="plan.html"><a href="plan.html#literature"><i class="fa fa-check"></i><b>1.4</b> 先行研究を探す</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="07-regression_basic.html"><a href="#%E8%AB%96%E6%96%87"><i class="fa fa-check"></i><b>1.4.1</b> 論文</a></li>
<li class="chapter" data-level="1.4.2" data-path="07-regression_basic.html"><a href="#%E6%9B%B8%E7%B1%8D"><i class="fa fa-check"></i><b>1.4.2</b> 書籍</a></li>
<li class="chapter" data-level="1.4.3" data-path="07-regression_basic.html"><a href="#%E5%A0%B1%E5%91%8A%E6%9B%B8"><i class="fa fa-check"></i><b>1.4.3</b> 報告書</a></li>
<li class="chapter" data-level="1.4.4" data-path="07-regression_basic.html"><a href="#%E7%A0%94%E7%A9%B6%E3%81%AE%E6%B5%81%E3%82%8C%E3%82%92%E3%81%A4%E3%81%8B%E3%82%80"><i class="fa fa-check"></i><b>1.4.4</b> 研究の流れをつかむ</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="preparation.html"><a href="preparation.html"><i class="fa fa-check"></i><b>2</b> RとRStudioの下準備</a>
<ul>
<li class="chapter" data-level="2.1" data-path="07-regression_basic.html"><a href="#r%E3%81%A8rstudio%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E6%96%B9%E6%B3%95"><i class="fa fa-check"></i><b>2.1</b> RとRStudioのインストール方法</a></li>
<li class="chapter" data-level="2.2" data-path="07-regression_basic.html"><a href="#%E3%83%87%E3%83%BC%E3%82%BF%E5%88%86%E6%9E%90%E3%81%AE%E3%83%AF%E3%83%BC%E3%82%AF%E3%83%95%E3%83%AD%E3%83%BC"><i class="fa fa-check"></i><b>2.2</b> データ分析のワークフロー</a></li>
<li class="chapter" data-level="2.3" data-path="preparation.html"><a href="preparation.html#preparation_project"><i class="fa fa-check"></i><b>2.3</b> プロジェクトの作成</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="07-regression_basic.html"><a href="#rstudio%E3%82%92%E9%96%8B%E3%81%84%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86"><i class="fa fa-check"></i><b>2.3.1</b> RStudioを開いてみよう</a></li>
<li class="chapter" data-level="2.3.2" data-path="07-regression_basic.html"><a href="#%E6%8E%88%E6%A5%AD%E7%94%A8%E3%81%AE%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E3%82%92%E4%BD%9C%E3%82%8D%E3%81%86"><i class="fa fa-check"></i><b>2.3.2</b> 授業用のフォルダを作ろう</a></li>
<li class="chapter" data-level="2.3.3" data-path="07-regression_basic.html"><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%91%E3%82%B9%E3%81%A8%E4%BD%9C%E6%A5%AD%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA"><i class="fa fa-check"></i><b>2.3.3</b> ファイルパスと作業ディレクトリ</a></li>
<li class="chapter" data-level="2.3.4" data-path="07-regression_basic.html"><a href="#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E4%BD%9C%E6%88%90%E3%81%AE%E6%89%8B%E9%A0%86"><i class="fa fa-check"></i><b>2.3.4</b> プロジェクト作成の手順</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="07-regression_basic.html"><a href="#%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E6%93%8D%E4%BD%9C"><i class="fa fa-check"></i><b>2.4</b> 基本的な操作</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="07-regression_basic.html"><a href="#%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB"><i class="fa fa-check"></i><b>2.4.1</b> スクリプトファイル</a></li>
<li class="chapter" data-level="2.4.2" data-path="07-regression_basic.html"><a href="#%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E4%BF%9D%E5%AD%98%E3%81%99%E3%82%8B"><i class="fa fa-check"></i><b>2.4.2</b> スクリプトファイルを保存する</a></li>
<li class="chapter" data-level="2.4.3" data-path="07-regression_basic.html"><a href="#%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-check"></i><b>2.4.3</b> パッケージのインストール</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="07-regression_basic.html"><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E8%A8%AD%E5%AE%9A"><i class="fa fa-check"></i><b>2.5</b> その他の設定</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="07-regression_basic.html"><a href="#rstudio%E3%82%92%E9%96%89%E3%81%98%E3%82%8B%E9%9A%9B%E3%81%AEworkspace%E4%BF%9D%E5%AD%98%E3%81%AE%E8%AD%A6%E5%91%8A%E3%82%92%E5%89%8A%E9%99%A4"><i class="fa fa-check"></i><b>2.5.1</b> RStudioを閉じる際のWorkspace保存の警告を削除</a></li>
<li class="chapter" data-level="2.5.2" data-path="07-regression_basic.html"><a href="#%E3%82%B0%E3%83%A9%E3%83%95%E3%81%AE%E6%97%A5%E6%9C%AC%E8%AA%9E%E8%A1%A8%E7%A4%BA"><i class="fa fa-check"></i><b>2.5.2</b> グラフの日本語表示</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="07-regression_basic.html"><a href="#r%E3%81%AE%E5%9F%BA%E7%A4%8E"><i class="fa fa-check"></i><b>2.6</b> Rの基礎</a></li>
<li class="chapter" data-level="2.7" data-path="07-regression_basic.html"><a href="#%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%8C%E5%87%BA%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%AB%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B%E7%AE%87%E6%89%80"><i class="fa fa-check"></i><b>2.7</b> エラーが出たときに確認する箇所</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="import.html"><a href="import.html"><i class="fa fa-check"></i><b>3</b> データの読み込み</a>
<ul>
<li class="chapter" data-level="3.1" data-path="07-regression_basic.html"><a href="#r%E3%81%AE%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF"><i class="fa fa-check"></i><b>3.1</b> Rのサンプルデータの読み込み</a></li>
<li class="chapter" data-level="3.2" data-path="07-regression_basic.html"><a href="#%E4%BD%9C%E6%A5%AD%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E4%B8%8A%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF"><i class="fa fa-check"></i><b>3.2</b> 作業ディレクトリ上のデータの読み込み</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="import.html"><a href="import.html#import_dir"><i class="fa fa-check"></i><b>3.2.1</b> データを置く場所を作る</a></li>
<li class="chapter" data-level="3.2.2" data-path="07-regression_basic.html"><a href="#csv%E5%BD%A2%E5%BC%8F%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB"><i class="fa fa-check"></i><b>3.2.2</b> csv形式のファイル</a></li>
<li class="chapter" data-level="3.2.3" data-path="07-regression_basic.html"><a href="#xlsx%E5%BD%A2%E5%BC%8F%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB"><i class="fa fa-check"></i><b>3.2.3</b> xlsx形式のファイル</a></li>
<li class="chapter" data-level="3.2.4" data-path="import.html"><a href="import.html#import_rds"><i class="fa fa-check"></i><b>3.2.4</b> rds形式のファイル</a></li>
<li class="chapter" data-level="3.2.5" data-path="07-regression_basic.html"><a href="#sav%E5%BD%A2%E5%BC%8F%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB"><i class="fa fa-check"></i><b>3.2.5</b> sav形式のファイル</a></li>
<li class="chapter" data-level="3.2.6" data-path="07-regression_basic.html"><a href="#dta%E5%BD%A2%E5%BC%8F%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB"><i class="fa fa-check"></i><b>3.2.6</b> dta形式のファイル</a></li>
<li class="chapter" data-level="3.2.7" data-path="07-regression_basic.html"><a href="#%E6%96%87%E5%AD%97%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AB%E9%96%A2%E3%82%8F%E3%82%8B%E5%95%8F%E9%A1%8C"><i class="fa fa-check"></i><b>3.2.7</b> 文字コードに関わる問題</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="07-regression_basic.html"><a href="#%E3%82%A6%E3%82%A7%E3%83%96%E4%B8%8A%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF"><i class="fa fa-check"></i><b>3.3</b> ウェブ上のデータの読み込み</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="handling.html"><a href="handling.html"><i class="fa fa-check"></i><b>4</b> データの加工</a>
<ul>
<li class="chapter" data-level="4.1" data-path="07-regression_basic.html"><a href="#%E6%9C%AC%E8%B3%87%E6%96%99%E3%81%A7%E7%94%A8%E3%81%84%E3%82%8B%E3%83%87%E3%83%BC%E3%82%BF"><i class="fa fa-check"></i><b>4.1</b> 本資料で用いるデータ</a></li>
<li class="chapter" data-level="4.2" data-path="07-regression_basic.html"><a href="#%E3%83%91%E3%82%A4%E3%83%97%E6%BC%94%E7%AE%97%E5%AD%90%E3%81%BE%E3%81%9F%E3%81%AF"><i class="fa fa-check"></i><b>4.2</b> パイプ演算子：%&gt;%または|&gt;</a></li>
<li class="chapter" data-level="4.3" data-path="07-regression_basic.html"><a href="#%E3%83%87%E3%83%BC%E3%82%BF%E5%8A%A0%E5%B7%A5%E3%81%AE%E3%82%B9%E3%83%86%E3%83%83%E3%83%97"><i class="fa fa-check"></i><b>4.3</b> データ加工のステップ</a></li>
<li class="chapter" data-level="4.4" data-path="07-regression_basic.html"><a href="#%E5%A4%89%E6%95%B0%E3%81%AE%E4%BD%9C%E6%88%90"><i class="fa fa-check"></i><b>4.4</b> 変数の作成</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="07-regression_basic.html"><a href="#%E5%A4%89%E6%95%B0%E3%81%AE%E5%9E%8B%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E5%A4%89%E6%95%B0%E3%81%A8%E9%80%A3%E7%B6%9A%E5%A4%89%E6%95%B0"><i class="fa fa-check"></i><b>4.4.1</b> 変数の型（カテゴリ変数と連続変数）</a></li>
<li class="chapter" data-level="4.4.2" data-path="07-regression_basic.html"><a href="#%E6%96%B0%E3%81%9F%E3%81%AA%E5%A4%89%E6%95%B0%E3%82%92%E3%81%A4%E3%81%8F%E3%82%8Bmutate"><i class="fa fa-check"></i><b>4.4.2</b> 新たな変数をつくる：mutate()</a></li>
<li class="chapter" data-level="4.4.3" data-path="07-regression_basic.html"><a href="#%E6%9D%A1%E4%BB%B6%E3%81%AE%E6%8C%87%E5%AE%9Aif_else"><i class="fa fa-check"></i><b>4.4.3</b> 条件の指定：if_else()</a></li>
<li class="chapter" data-level="4.4.4" data-path="07-regression_basic.html"><a href="#%E8%A4%87%E6%95%B0%E6%9D%A1%E4%BB%B6%E3%81%AE%E6%8C%87%E5%AE%9Acase_when"><i class="fa fa-check"></i><b>4.4.4</b> 複数条件の指定：case_when()</a></li>
<li class="chapter" data-level="4.4.5" data-path="07-regression_basic.html"><a href="#%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E5%A4%89%E6%95%B0%E3%81%B8%E5%A4%89%E6%8F%9Bfactor"><i class="fa fa-check"></i><b>4.4.5</b> カテゴリ変数へ変換：factor()</a></li>
<li class="chapter" data-level="4.4.6" data-path="07-regression_basic.html"><a href="#%E5%BF%85%E8%A6%81%E3%81%AA%E5%88%97%E3%81%AE%E3%81%BF%E6%8A%BD%E5%87%BAselect"><i class="fa fa-check"></i><b>4.4.6</b> 必要な列のみ抽出：select()</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="handling.html"><a href="handling.html#handling-tips"><i class="fa fa-check"></i><b>4.5</b> 変数の作成についてのtips</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="07-regression_basic.html"><a href="#%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E3%82%92%E3%81%BE%E3%81%A8%E3%82%81%E3%82%8B"><i class="fa fa-check"></i><b>4.5.1</b> カテゴリをまとめる</a></li>
<li class="chapter" data-level="4.5.2" data-path="07-regression_basic.html"><a href="#%E8%A4%87%E6%95%B0%E3%81%AE%E5%A4%89%E6%95%B0%E3%82%92%E7%B5%84%E3%81%BF%E5%90%88%E3%82%8F%E3%81%9B%E3%81%9F%E5%A4%89%E6%95%B0%E3%82%92%E4%BD%9C%E3%82%8B"><i class="fa fa-check"></i><b>4.5.2</b> 複数の変数を組み合わせた変数を作る</a></li>
<li class="chapter" data-level="4.5.3" data-path="07-regression_basic.html"><a href="#%E5%9D%87%E7%AD%89%E3%81%AA%E9%A0%86%E5%BA%8F%E3%82%92%E4%BB%AE%E5%AE%9A%E3%81%97%E3%81%A6%E9%80%A3%E7%B6%9A%E5%A4%89%E6%95%B0%E3%81%A8%E3%81%99%E3%82%8B"><i class="fa fa-check"></i><b>4.5.3</b> 均等な順序を仮定して連続変数とする</a></li>
<li class="chapter" data-level="4.5.4" data-path="07-regression_basic.html"><a href="#%E7%84%A1%E5%9B%9E%E7%AD%94%E9%9D%9E%E8%A9%B2%E5%BD%93%E3%82%8F%E3%81%8B%E3%82%89%E3%81%AA%E3%81%84%E3%81%AA%E3%81%A9%E3%82%92na%E3%81%AB"><i class="fa fa-check"></i><b>4.5.4</b> 無回答、非該当、「わからない」などをNAに</a></li>
<li class="chapter" data-level="4.5.5" data-path="07-regression_basic.html"><a href="#%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E5%A4%89%E6%95%B0%E3%81%AE%E5%8C%BA%E9%96%93%E3%81%AE%E4%B8%AD%E7%82%B9%E3%82%92%E3%81%A8%E3%81%A3%E3%81%A6%E9%80%A3%E7%B6%9A%E5%A4%89%E6%95%B0%E3%81%A8%E3%81%99%E3%82%8B"><i class="fa fa-check"></i><b>4.5.5</b> カテゴリ変数の区間の中点をとって連続変数とする</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="07-regression_basic.html"><a href="#%E3%82%92%E3%81%A4%E3%81%AA%E3%81%92%E3%81%A6%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%92%E3%81%BE%E3%81%A8%E3%82%81%E3%82%8B"><i class="fa fa-check"></i><b>4.6</b> %&gt;%をつなげてコマンドをまとめる</a></li>
<li class="chapter" data-level="4.7" data-path="handling.html"><a href="handling.html#handling_sample"><i class="fa fa-check"></i><b>4.7</b> サンプルの限定</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="07-regression_basic.html"><a href="#%E8%A9%B2%E5%BD%93%E3%81%99%E3%82%8B%E3%82%B1%E3%83%BC%E3%82%B9%E3%81%A0%E3%81%91%E3%82%92%E6%AE%8B%E3%81%99filter"><i class="fa fa-check"></i><b>4.7.1</b> 該当するケースだけを残す：filter()</a></li>
<li class="chapter" data-level="4.7.2" data-path="07-regression_basic.html"><a href="#%E6%AC%A0%E6%90%8D%E5%80%A4%E3%81%AE%E6%89%B1%E3%81%84"><i class="fa fa-check"></i><b>4.7.2</b> 欠損値の扱い</a></li>
<li class="chapter" data-level="4.7.3" data-path="07-regression_basic.html"><a href="#%E5%A4%96%E3%82%8C%E5%80%A4%E3%81%AE%E6%89%B1%E3%81%84"><i class="fa fa-check"></i><b>4.7.3</b> 外れ値の扱い</a></li>
<li class="chapter" data-level="4.7.4" data-path="07-regression_basic.html"><a href="#%E5%88%86%E6%9E%90%E7%94%A8%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%99"><i class="fa fa-check"></i><b>4.7.4</b> 分析用データを書き出す</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="07-regression_basic.html"><a href="#%E7%99%BA%E5%B1%95%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E8%BF%BD%E5%8A%A0"><i class="fa fa-check"></i><b>4.8</b> 【発展】データの追加</a></li>
<li class="chapter" data-level="4.9" data-path="07-regression_basic.html"><a href="#%E6%BC%94%E7%BF%92%E5%95%8F%E9%A1%8C"><i class="fa fa-check"></i><b>4.9</b> 演習問題</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="descriptives.html"><a href="descriptives.html"><i class="fa fa-check"></i><b>5</b> 1変数の集計</a>
<ul>
<li class="chapter" data-level="5.1" data-path="07-regression_basic.html"><a href="#%E9%80%A3%E7%B6%9A%E5%A4%89%E6%95%B0%E3%82%92%E9%9B%86%E8%A8%88%E3%81%99%E3%82%8B"><i class="fa fa-check"></i><b>5.1</b> 連続変数を集計する</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="descriptives.html"><a href="descriptives.html#descriptives_summarize"><i class="fa fa-check"></i><b>5.1.1</b> 要約統計量の計算</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="descriptives.html"><a href="descriptives.html#descriptives_ggplot"><i class="fa fa-check"></i><b>5.2</b> 分布をみる</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="07-regression_basic.html"><a href="#%E3%83%92%E3%82%B9%E3%83%88%E3%82%B0%E3%83%A9%E3%83%A0%E3%81%A8ggplot%E3%81%AE%E5%B0%8E%E5%85%A5"><i class="fa fa-check"></i><b>5.2.1</b> ヒストグラムとggplotの導入</a></li>
<li class="chapter" data-level="5.2.2" data-path="07-regression_basic.html"><a href="#ggplot%E3%81%AE%E8%A8%AD%E5%AE%9A%E6%97%A5%E6%9C%AC%E8%AA%9E%E9%96%A2%E4%BF%82"><i class="fa fa-check"></i><b>5.2.2</b> ggplotの設定（日本語関係）</a></li>
<li class="chapter" data-level="5.2.3" data-path="07-regression_basic.html"><a href="#%E8%BB%B8%E3%81%AB%E5%90%8D%E5%89%8D%E3%82%92%E3%81%A4%E3%81%91%E3%82%8B"><i class="fa fa-check"></i><b>5.2.3</b> 軸に名前をつける</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="07-regression_basic.html"><a href="#%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E5%A4%89%E6%95%B0%E3%82%92%E9%9B%86%E8%A8%88%E3%81%99%E3%82%8B"><i class="fa fa-check"></i><b>5.3</b> カテゴリ変数を集計する</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="descriptives.html"><a href="descriptives.html#descriptives_table"><i class="fa fa-check"></i><b>5.3.1</b> 度数の確認</a></li>
<li class="chapter" data-level="5.3.2" data-path="07-regression_basic.html"><a href="#%E5%88%86%E5%B8%83%E3%81%AE%E5%8F%AF%E8%A6%96%E5%8C%96%E6%A3%92%E3%82%B0%E3%83%A9%E3%83%95"><i class="fa fa-check"></i><b>5.3.2</b> 分布の可視化：棒グラフ</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="descriptives.html"><a href="descriptives.html#descriptives_gtsummary"><i class="fa fa-check"></i><b>5.4</b> 記述統計量の一覧表を作る</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="07-regression_basic.html"><a href="#%E8%A8%98%E8%BF%B0%E7%B5%B1%E8%A8%88%E9%87%8F%E3%81%AE%E4%B8%80%E8%A6%A7%E8%A1%A8"><i class="fa fa-check"></i><b>5.4.1</b> 記述統計量の一覧表</a></li>
<li class="chapter" data-level="5.4.2" data-path="07-regression_basic.html"><a href="#%E3%82%B0%E3%83%AB%E3%83%BC%E3%83%97%E5%88%A5%E3%81%AE%E8%A8%98%E8%BF%B0%E7%B5%B1%E8%A8%88%E9%87%8F%E3%81%AE%E4%B8%80%E8%A6%A7%E8%A1%A8"><i class="fa fa-check"></i><b>5.4.2</b> グループ別の記述統計量の一覧表</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="07-regression_basic.html"><a href="#%E7%B5%90%E6%9E%9C%E3%82%92%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%99"><i class="fa fa-check"></i><b>5.5</b> 結果をファイルに書き出す</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="07-regression_basic.html"><a href="#%E7%B5%90%E6%9E%9C%E3%82%92%E5%85%A5%E3%82%8C%E3%82%8B%E3%81%9F%E3%82%81%E3%81%AE%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E3%82%92%E4%BD%9C%E3%82%8B"><i class="fa fa-check"></i><b>5.5.1</b> 結果を入れるためのフォルダを作る</a></li>
<li class="chapter" data-level="5.5.2" data-path="descriptives.html"><a href="descriptives.html#descriptive_export_ggplot"><i class="fa fa-check"></i><b>5.5.2</b> ggplotで作成した図を書き出す</a></li>
<li class="chapter" data-level="5.5.3" data-path="descriptives.html"><a href="descriptives.html#descriptive_export_tbl_summary"><i class="fa fa-check"></i><b>5.5.3</b> 記述統計の一覧表をwordに書き出す</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="07-regression_basic.html"><a href="#tbl_summary%E3%81%A7%E5%80%A4%E3%81%AE%E5%B0%91%E3%81%AA%E3%81%84%E9%80%A3%E7%B6%9A%E5%A4%89%E6%95%B0%E3%81%8C%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E5%A4%89%E6%95%B0%E3%81%A8%E3%81%97%E3%81%A6%E9%9B%86%E8%A8%88%E3%81%95%E3%82%8C%E3%82%8B%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-check"></i><b>5.6</b> tbl_summary()で値の少ない連続変数がカテゴリ変数として集計される問題について</a></li>
<li class="chapter" data-level="5.7" data-path="07-regression_basic.html"><a href="#%E7%B7%B4%E7%BF%92%E5%95%8F%E9%A1%8C"><i class="fa fa-check"></i><b>5.7</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tabulate.html"><a href="tabulate.html"><i class="fa fa-check"></i><b>6</b> 2変数の集計</a>
<ul>
<li class="chapter" data-level="6.1" data-path="tabulate.html"><a href="tabulate.html#tabulate_summarize"><i class="fa fa-check"></i><b>6.1</b> 平均値の比較</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="07-regression_basic.html"><a href="#%E5%9F%BA%E6%9C%AC"><i class="fa fa-check"></i><b>6.1.1</b> 基本</a></li>
<li class="chapter" data-level="6.1.2" data-path="07-regression_basic.html"><a href="#%E6%A3%92%E3%82%B0%E3%83%A9%E3%83%95%E3%81%AB%E3%82%88%E3%82%8B%E5%8F%AF%E8%A6%96%E5%8C%96"><i class="fa fa-check"></i><b>6.1.2</b> 棒グラフによる可視化</a></li>
<li class="chapter" data-level="6.1.3" data-path="07-regression_basic.html"><a href="#%E8%A4%87%E6%95%B0%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E3%81%AE%E7%B5%84%E3%81%BF%E5%90%88%E3%82%8F%E3%81%9B"><i class="fa fa-check"></i><b>6.1.3</b> 複数カテゴリの組み合わせ</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="tabulate.html"><a href="tabulate.html#tabulate_distribution"><i class="fa fa-check"></i><b>6.2</b> 分布の比較</a></li>
<li class="chapter" data-level="6.3" data-path="tabulate.html"><a href="tabulate.html#cross_tabulation"><i class="fa fa-check"></i><b>6.3</b> クロス表</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="07-regression_basic.html"><a href="#%E5%9F%BA%E6%9C%AC-1"><i class="fa fa-check"></i><b>6.3.1</b> 基本</a></li>
<li class="chapter" data-level="6.3.2" data-path="07-regression_basic.html"><a href="#%E3%82%AB%E3%82%A42%E4%B9%97%E6%A4%9C%E5%AE%9A%E8%A3%9C%E8%B6%B3"><i class="fa fa-check"></i><b>6.3.2</b> カイ2乗検定（補足）</a></li>
<li class="chapter" data-level="6.3.3" data-path="07-regression_basic.html"><a href="#%E3%81%8D%E3%82%8C%E3%81%84%E3%81%AA%E3%82%AF%E3%83%AD%E3%82%B9%E8%A1%A8%E3%82%92%E3%81%A4%E3%81%8F%E3%82%8B---gtsummarytbl_cross"><i class="fa fa-check"></i><b>6.3.3</b> きれいなクロス表をつくる - gtsummary::tbl_cross()</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="07-regression_basic.html"><a href="#%E3%82%AF%E3%83%AD%E3%82%B9%E8%A1%A8%E3%82%92%E5%9B%B3%E7%A4%BA%E3%81%99%E3%82%8B"><i class="fa fa-check"></i><b>6.4</b> クロス表を図示する</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="07-regression_basic.html"><a href="#count%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B"><i class="fa fa-check"></i><b>6.4.1</b> count()を利用する</a></li>
<li class="chapter" data-level="6.4.2" data-path="07-regression_basic.html"><a href="#count%E3%81%AE%E6%B3%A8%E6%84%8F%E7%82%B9"><i class="fa fa-check"></i><b>6.4.2</b> count()の注意点</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="tabulate.html"><a href="tabulate.html#scatterplot"><i class="fa fa-check"></i><b>6.5</b> 散布図</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="07-regression_basic.html"><a href="#%E6%95%A3%E5%B8%83%E5%9B%B3%E3%82%92%E3%81%BF%E3%82%8B"><i class="fa fa-check"></i><b>6.5.1</b> 散布図をみる</a></li>
<li class="chapter" data-level="6.5.2" data-path="07-regression_basic.html"><a href="#%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E3%81%94%E3%81%A8%E3%81%AB%E6%95%A3%E5%B8%83%E5%9B%B3%E3%82%92%E5%88%86%E3%81%91%E3%82%8B"><i class="fa fa-check"></i><b>6.5.2</b> カテゴリごとに散布図を分ける</a></li>
<li class="chapter" data-level="6.5.3" data-path="07-regression_basic.html"><a href="#%E7%9B%B8%E9%96%A2%E4%BF%82%E6%95%B0"><i class="fa fa-check"></i><b>6.5.3</b> 相関係数</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="07-regression_basic.html"><a href="#%E5%A4%89%E6%95%B0%E9%9B%86%E8%A8%88%E3%81%AE%E3%81%A8%E3%81%8D%E3%81%AE%E3%81%8F%E3%81%B5%E3%81%86"><i class="fa fa-check"></i><b>6.6</b> 2変数集計のときのくふう</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="07-regression_basic.html"><a href="#%E5%80%A4%E3%81%8C%E7%B2%97%E3%81%84%E9%80%A3%E7%B6%9A%E5%A4%89%E6%95%B0%E3%82%92%E6%89%B1%E3%81%86"><i class="fa fa-check"></i><b>6.6.1</b> 値が粗い連続変数を扱う</a></li>
<li class="chapter" data-level="6.6.2" data-path="07-regression_basic.html"><a href="#%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E3%81%8C%E5%A4%9A%E3%81%84%E3%82%AF%E3%83%AD%E3%82%B9%E8%A1%A8%E3%82%92%E6%89%B1%E3%81%86"><i class="fa fa-check"></i><b>6.6.2</b> カテゴリが多いクロス表を扱う</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="07-regression_basic.html"><a href="#%E7%B5%90%E6%9E%9C%E3%82%92%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%99-1"><i class="fa fa-check"></i><b>6.7</b> 結果をファイルに書き出す</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="07-regression_basic.html"><a href="#ggplot%E3%81%A7%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E5%9B%B3%E3%82%92%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%99"><i class="fa fa-check"></i><b>6.7.1</b> ggplotで作成した図を書き出す</a></li>
<li class="chapter" data-level="6.7.2" data-path="07-regression_basic.html"><a href="#%E3%82%AF%E3%83%AD%E3%82%B9%E8%A1%A8%E3%82%92word%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%99"><i class="fa fa-check"></i><b>6.7.2</b> クロス表をwordファイルに書き出す</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="07-regression_basic.html"><a href="#%E7%B7%B4%E7%BF%92%E5%95%8F%E9%A1%8C-1"><i class="fa fa-check"></i><b>6.8</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="regression_basic.html"><a href="regression_basic.html"><i class="fa fa-check"></i><b>7</b> 回帰分析の基礎</a>
<ul>
<li class="chapter" data-level="7.1" data-path="07-regression_basic.html"><a href="#%E5%9B%9E%E5%B8%B0%E5%88%86%E6%9E%90%E3%81%A8%E3%81%AF%E4%BD%95%E3%81%8B"><i class="fa fa-check"></i><b>7.1</b> 回帰分析とは何か</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="07-regression_basic.html"><a href="#%E6%95%A3%E5%B8%83%E5%9B%B3%E3%82%92%E7%9C%BA%E3%82%81%E3%82%8B"><i class="fa fa-check"></i><b>7.1.1</b> 散布図を眺める</a></li>
<li class="chapter" data-level="7.1.2" data-path="07-regression_basic.html"><a href="#%E5%9B%9E%E5%B8%B0%E5%BC%8F%E3%81%AE%E8%AA%AD%E3%81%BF%E6%96%B9"><i class="fa fa-check"></i><b>7.1.2</b> 回帰式の読み方</a></li>
<li class="chapter" data-level="7.1.3" data-path="07-regression_basic.html"><a href="#%E5%9B%9E%E5%B8%B0%E5%BC%8F%E3%81%AE%E6%B1%BA%E3%82%81%E6%96%B9%E6%9C%80%E5%B0%8F%E4%BA%8C%E4%B9%97%E6%B3%95"><i class="fa fa-check"></i><b>7.1.3</b> 回帰式の決め方：最小二乗法</a></li>
<li class="chapter" data-level="7.1.4" data-path="07-regression_basic.html"><a href="#%E6%AF%8D%E9%9B%86%E5%9B%A3%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E9%96%A2%E4%BF%82%E3%81%AE%E6%8E%A8%E6%B8%AC"><i class="fa fa-check"></i><b>7.1.4</b> 母集団における関係の推測</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="07-regression_basic.html"><a href="#%E7%8B%AC%E7%AB%8B%E5%A4%89%E6%95%B0%E3%81%8C%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E5%A4%89%E6%95%B0%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-check"></i><b>7.2</b> 独立変数がカテゴリ変数の場合</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="07-regression_basic.html"><a href="#%E5%80%A4%E3%81%AE%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA"><i class="fa fa-check"></i><b>7.2.1</b> 2値のカテゴリ</a></li>
<li class="chapter" data-level="7.2.2" data-path="07-regression_basic.html"><a href="#%E5%80%A4%E4%BB%A5%E4%B8%8A%E3%81%AE%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA"><i class="fa fa-check"></i><b>7.2.2</b> 3値以上のカテゴリ</a></li>
<li class="chapter" data-level="7.2.3" data-path="07-regression_basic.html"><a href="#%E5%A4%89%E6%95%B0%E3%81%8Cfactor%E3%81%A7%E3%81%82%E3%82%8C%E3%81%B0%E8%87%AA%E5%8B%95%E3%81%A7%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E3%81%A8%E3%81%97%E3%81%A6%E6%8A%95%E5%85%A5%E3%81%95%E3%82%8C%E3%82%8B"><i class="fa fa-check"></i><b>7.2.3</b> 変数がfactorであれば自動でカテゴリとして投入される</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="regression_basic.html"><a href="regression_basic.html#regression_basic_binary"><i class="fa fa-check"></i><b>7.3</b> 従属変数が2値のカテゴリ変数（0/1）の場合</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="07-regression_basic.html"><a href="#%E3%82%AF%E3%83%AD%E3%82%B9%E8%A1%A8%E3%81%A8%E6%AF%94%E8%BC%83%E3%81%97%E3%81%AA%E3%81%8C%E3%82%89%E7%B5%90%E6%9E%9C%E3%82%92%E3%81%BF%E3%82%8B"><i class="fa fa-check"></i><b>7.3.1</b> クロス表と比較しながら結果をみる</a></li>
<li class="chapter" data-level="7.3.2" data-path="07-regression_basic.html"><a href="#%E6%95%A3%E5%B8%83%E5%9B%B3%E3%81%A8%E6%AF%94%E8%BC%83%E3%81%97%E3%81%AA%E3%81%8C%E3%82%89%E7%B5%90%E6%9E%9C%E3%82%92%E3%81%BF%E3%82%8B"><i class="fa fa-check"></i><b>7.3.2</b> 散布図と比較しながら結果をみる</a></li>
<li class="chapter" data-level="7.3.3" data-path="07-regression_basic.html"><a href="#%E6%B3%A8%E6%84%8F%E7%82%B9"><i class="fa fa-check"></i><b>7.3.3</b> 注意点</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="regression_basic.html"><a href="regression_basic.html#regression_basic_log"><i class="fa fa-check"></i><b>7.4</b> 非線形の関連：対数変換</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="07-regression_basic.html"><a href="#%E5%AF%BE%E6%95%B0%E5%A4%89%E6%8F%9B%E3%81%A8%E3%81%AF"><i class="fa fa-check"></i><b>7.4.1</b> 対数変換とは</a></li>
<li class="chapter" data-level="7.4.2" data-path="07-regression_basic.html"><a href="#%E8%87%AA%E7%84%B6%E5%AF%BE%E6%95%B0%E3%81%A8%E5%AF%BE%E6%95%B0%E9%96%A2%E6%95%B0%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-check"></i><b>7.4.2</b> 自然対数と対数関数について</a></li>
<li class="chapter" data-level="7.4.3" data-path="07-regression_basic.html"><a href="#%E5%AF%BE%E6%95%B0%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E5%A0%B4%E5%90%88%E3%81%AE%E5%9B%9E%E5%B8%B0%E5%88%86%E6%9E%90"><i class="fa fa-check"></i><b>7.4.3</b> 対数を使った場合の回帰分析</a></li>
<li class="chapter" data-level="7.4.4" data-path="07-regression_basic.html"><a href="#%E5%BE%93%E5%B1%9E%E5%A4%89%E6%95%B0%E3%81%AE%E5%AF%BE%E6%95%B0%E3%82%92%E5%8F%96%E3%81%A3%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%AE%E7%B5%90%E6%9E%9C%E3%81%AE%E8%A7%A3%E9%87%88"><i class="fa fa-check"></i><b>7.4.4</b> 従属変数の対数を取ったときの結果の解釈</a></li>
<li class="chapter" data-level="7.4.5" data-path="07-regression_basic.html"><a href="#%E5%BE%93%E5%B1%9E%E5%A4%89%E6%95%B0%E3%81%BE%E3%81%9F%E3%81%AF%E7%8B%AC%E7%AB%8B%E5%A4%89%E6%95%B0%E3%82%92%E5%AF%BE%E6%95%B0%E5%A4%89%E6%8F%9B%E3%81%97%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%AE%E8%A7%A3%E9%87%88"><i class="fa fa-check"></i><b>7.4.5</b> 従属変数または独立変数を対数変換したときの解釈</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="regression_basic.html"><a href="regression_basic.html#regression_basic_quadratic"><i class="fa fa-check"></i><b>7.5</b> 非線形の関連：二次曲線型</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="07-regression_basic.html"><a href="#%E4%BA%8C%E6%AC%A1%E6%9B%B2%E7%B7%9A%E3%81%A8%E3%81%AF"><i class="fa fa-check"></i><b>7.5.1</b> 二次曲線とは</a></li>
<li class="chapter" data-level="7.5.2" data-path="07-regression_basic.html"><a href="#%E5%A4%89%E6%95%B0%E3%81%AE%E4%BD%9C%E6%88%90%E3%81%A8%E7%B5%90%E6%9E%9C%E3%81%AE%E8%A7%A3%E9%87%88"><i class="fa fa-check"></i><b>7.5.2</b> 変数の作成と結果の解釈</a></li>
<li class="chapter" data-level="7.5.3" data-path="07-regression_basic.html"><a href="#%E3%83%A2%E3%83%87%E3%83%AB%E9%81%B8%E6%8A%9E%E3%81%A8f%E6%A4%9C%E5%AE%9A"><i class="fa fa-check"></i><b>7.5.3</b> モデル選択とF検定</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="regression_basic.html"><a href="regression_basic.html#regression_modelsummary"><i class="fa fa-check"></i><b>7.6</b> 回帰分析の結果をきれいに表示する</a></li>
<li class="chapter" data-level="7.7" data-path="regression_basic.html"><a href="regression_basic.html#regression_basic_export"><i class="fa fa-check"></i><b>7.7</b> 結果をファイルに書き出す</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="07-regression_basic.html"><a href="#word%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%99"><i class="fa fa-check"></i><b>7.7.1</b> Wordファイルに書き出す</a></li>
<li class="chapter" data-level="7.7.2" data-path="regression_basic.html"><a href="regression_basic.html#regression_output_pptx"><i class="fa fa-check"></i><b>7.7.2</b> PowerPointファイルに書き出す</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="07-regression_basic.html"><a href="#%E7%B7%B4%E7%BF%92%E5%95%8F%E9%A1%8C-2"><i class="fa fa-check"></i><b>7.8</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="regression_advanced.html"><a href="regression_advanced.html"><i class="fa fa-check"></i><b>8</b> 回帰分析の活用</a>
<ul>
<li class="chapter" data-level="8.1" data-path="07-regression_basic.html"><a href="#%E9%87%8D%E5%9B%9E%E5%B8%B0%E5%88%86%E6%9E%90"><i class="fa fa-check"></i><b>8.1</b> 重回帰分析</a></li>
<li class="chapter" data-level="8.2" data-path="07-regression_basic.html"><a href="#%E4%BA%A4%E7%B5%A1%E8%A6%81%E5%9B%A0%E3%81%AE%E7%B5%B1%E5%88%B6"><i class="fa fa-check"></i><b>8.2</b> 交絡要因の統制</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="07-regression_basic.html"><a href="#%E4%BA%A4%E7%B5%A1%E3%81%A8%E3%81%AF%E4%BD%95%E3%81%8B"><i class="fa fa-check"></i><b>8.2.1</b> 交絡とは何か</a></li>
<li class="chapter" data-level="8.2.2" data-path="07-regression_basic.html"><a href="#%E7%B5%90%E6%9E%9C%E3%81%AE%E6%AF%94%E8%BC%83%E3%81%A8%E8%A7%A3%E9%87%88"><i class="fa fa-check"></i><b>8.2.2</b> 結果の比較と解釈</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="07-regression_basic.html"><a href="#%E5%AA%92%E4%BB%8B%E5%88%86%E6%9E%90%E8%A6%81%E5%9B%A0%E5%88%86%E8%A7%A3"><i class="fa fa-check"></i><b>8.3</b> 媒介分析／要因分解</a></li>
<li class="chapter" data-level="8.4" data-path="07-regression_basic.html"><a href="#%E5%9B%9E%E5%B8%B0%E5%88%86%E6%9E%90%E3%81%AE%E5%AE%9F%E9%9A%9B"><i class="fa fa-check"></i><b>8.4</b> 回帰分析の実際</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="07-regression_basic.html"><a href="#%E4%BA%A4%E7%B5%A1%E3%81%A8%E5%AA%92%E4%BB%8B"><i class="fa fa-check"></i><b>8.4.1</b> 交絡と媒介</a></li>
<li class="chapter" data-level="8.4.2" data-path="07-regression_basic.html"><a href="#%E5%BE%93%E5%B1%9E%E5%A4%89%E6%95%B0%E3%82%92%E5%AF%BE%E6%95%B0%E5%A4%89%E6%8F%9B%E3%81%97%E3%81%9F%E5%A0%B4%E5%90%88%E3%81%AE%E8%A7%A3%E9%87%88broom%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%AE%E6%B4%BB%E7%94%A8"><i class="fa fa-check"></i><b>8.4.2</b> 従属変数を対数変換した場合の解釈：broomパッケージの活用</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="07-regression_basic.html"><a href="#%E5%9B%9E%E5%B8%B0%E5%88%86%E6%9E%90%E3%81%A7%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A1%E3%81%AA%E5%9B%B0%E3%82%8A%E3%81%94%E3%81%A8%E3%81%B8%E3%81%AE%E5%AF%BE%E5%87%A6"><i class="fa fa-check"></i><b>8.5</b> 回帰分析でありがちな困りごとへの対処</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="07-regression_basic.html"><a href="#%E5%8F%82%E7%85%A7%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E3%81%AE%E5%85%A5%E3%82%8C%E6%9B%BF%E3%81%88"><i class="fa fa-check"></i><b>8.5.1</b> 参照カテゴリの入れ替え</a></li>
<li class="chapter" data-level="8.5.2" data-path="07-regression_basic.html"><a href="#%E5%8D%98%E4%BD%8D%E3%81%AE%E5%A4%89%E6%9B%B4"><i class="fa fa-check"></i><b>8.5.2</b> 単位の変更</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="07-regression_basic.html"><a href="#%E7%B5%90%E6%9E%9C%E3%82%92%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%99-2"><i class="fa fa-check"></i><b>8.6</b> 結果をファイルに書き出す</a></li>
<li class="chapter" data-level="8.7" data-path="07-regression_basic.html"><a href="#%E7%B7%B4%E7%BF%92%E5%95%8F%E9%A1%8C-3"><i class="fa fa-check"></i><b>8.7</b> 練習問題</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="regression_interaction.html"><a href="regression_interaction.html"><i class="fa fa-check"></i><b>9</b> 交互作用</a>
<ul>
<li class="chapter" data-level="9.1" data-path="07-regression_basic.html"><a href="#%E4%BA%A4%E4%BA%92%E4%BD%9C%E7%94%A8%E3%81%A8%E3%81%AF%E3%81%AA%E3%81%AB%E3%81%8B"><i class="fa fa-check"></i><b>9.1</b> 交互作用とはなにか</a></li>
<li class="chapter" data-level="9.2" data-path="07-regression_basic.html"><a href="#x%E3%81%8C%E9%80%A3%E7%B6%9A%E5%A4%89%E6%95%B0z%E3%81%8C%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E5%A4%89%E6%95%B0%E3%81%BE%E3%81%9F%E3%81%AF%E3%81%9D%E3%81%AE%E9%80%86%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-check"></i><b>9.2</b> xが連続変数、zがカテゴリ変数（またはその逆）の場合</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="07-regression_basic.html"><a href="#%E5%AE%9F%E4%BE%8B%E6%95%B0%E7%9A%84%E6%80%9D%E8%80%83%E5%8A%9B%E3%81%8C%E8%B3%83%E9%87%91%E3%82%92%E9%AB%98%E3%82%81%E3%82%8B%E5%8A%B9%E6%9E%9C%E3%81%AF%E6%80%A7%E5%88%A5%E3%81%AB%E3%82%88%E3%81%A3%E3%81%A6%E7%95%B0%E3%81%AA%E3%82%8B%E3%81%8B"><i class="fa fa-check"></i><b>9.2.1</b> 実例：数的思考力が賃金を高める効果は性別によって異なるか？</a></li>
<li class="chapter" data-level="9.2.2" data-path="07-regression_basic.html"><a href="#%E7%B5%90%E6%9E%9C%E3%82%92%E5%9B%B3%E7%A4%BA%E3%81%99%E3%82%8B"><i class="fa fa-check"></i><b>9.2.2</b> 結果を図示する</a></li>
<li class="chapter" data-level="9.2.3" data-path="07-regression_basic.html"><a href="#x%E3%81%8C%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E5%A4%89%E6%95%B0z%E3%81%8C%E9%80%A3%E7%B6%9A%E5%A4%89%E6%95%B0%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-check"></i><b>9.2.3</b> xがカテゴリ変数、zが連続変数の場合</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="07-regression_basic.html"><a href="#x%E3%81%8C%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E5%A4%89%E6%95%B0z%E3%81%8C%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E5%A4%89%E6%95%B0%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-check"></i><b>9.3</b> xがカテゴリ変数、zがカテゴリ変数の場合</a></li>
<li class="chapter" data-level="9.4" data-path="07-regression_basic.html"><a href="#x%E3%81%8C%E9%80%A3%E7%B6%9A%E5%A4%89%E6%95%B0z%E3%81%8C%E9%80%A3%E7%B6%9A%E5%A4%89%E6%95%B0%E3%81%AE%E5%A0%B4%E5%90%88%E4%BD%9C%E6%88%90%E4%B8%AD"><i class="fa fa-check"></i><b>9.4</b> xが連続変数、zが連続変数の場合（作成中）</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="logit.html"><a href="logit.html"><i class="fa fa-check"></i><b>10</b> ロジスティック回帰分析</a>
<ul>
<li class="chapter" data-level="10.1" data-path="07-regression_basic.html"><a href="#%E4%BA%8C%E5%80%A4%E5%A4%89%E6%95%B0%E3%82%92%E5%BE%93%E5%B1%9E%E5%A4%89%E6%95%B0%E3%81%AB%E3%81%99%E3%82%8B%E7%B7%9A%E5%BD%A2%E5%9B%9E%E5%B8%B0%E5%88%86%E6%9E%90%E3%81%AB%E3%82%88%E3%82%8B%E6%96%B9%E6%B3%95"><i class="fa fa-check"></i><b>10.1</b> 二値変数を従属変数にする：線形回帰分析による方法</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="07-regression_basic.html"><a href="#%E7%B7%9A%E5%BD%A2%E7%A2%BA%E7%8E%87%E3%83%A2%E3%83%87%E3%83%AB"><i class="fa fa-check"></i><b>10.1.1</b> 線形確率モデル</a></li>
<li class="chapter" data-level="10.1.2" data-path="07-regression_basic.html"><a href="#%E3%83%AD%E3%83%90%E3%82%B9%E3%83%88%E6%A8%99%E6%BA%96%E8%AA%A4%E5%B7%AE%E6%AE%8B%E5%B7%AE%E3%81%8C%E6%AD%A3%E8%A6%8F%E5%88%86%E5%B8%83%E3%81%97%E3%81%AA%E3%81%84%E5%95%8F%E9%A1%8C%E3%81%B8%E3%81%AE%E5%AF%BE%E5%87%A6"><i class="fa fa-check"></i><b>10.1.2</b> ロバスト標準誤差：残差が正規分布しない問題への対処</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="07-regression_basic.html"><a href="#%E3%83%AD%E3%82%B8%E3%82%B9%E3%83%86%E3%82%A3%E3%83%83%E3%82%AF%E5%9B%9E%E5%B8%B0%E5%88%86%E6%9E%90%E3%81%A8%E3%81%AF"><i class="fa fa-check"></i><b>10.2</b> ロジスティック回帰分析とは</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="07-regression_basic.html"><a href="#%E7%B7%9A%E5%BD%A2%E7%A2%BA%E7%8E%87%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E5%95%8F%E9%A1%8C%E7%82%B9"><i class="fa fa-check"></i><b>10.2.1</b> 線形確率モデルの問題点</a></li>
<li class="chapter" data-level="10.2.2" data-path="07-regression_basic.html"><a href="#%E5%AF%BE%E6%95%B0%E3%82%AA%E3%83%83%E3%82%BA%E6%AF%94%E5%8A%B9%E6%9E%9C%E3%82%92%E6%AF%94%E3%81%A7%E6%B8%AC%E5%AE%9A%E3%81%99%E3%82%8B"><i class="fa fa-check"></i><b>10.2.2</b> （対数）オッズ比：効果を「比」で測定する</a></li>
<li class="chapter" data-level="10.2.3" data-path="07-regression_basic.html"><a href="#%E3%83%AD%E3%82%B8%E3%82%B9%E3%83%86%E3%82%A3%E3%83%83%E3%82%AF%E5%9B%9E%E5%B8%B0%E5%88%86%E6%9E%90%E3%83%AD%E3%82%B8%E3%83%83%E3%83%88%E3%83%A2%E3%83%87%E3%83%AB"><i class="fa fa-check"></i><b>10.2.3</b> ロジスティック回帰分析（ロジットモデル）</a></li>
<li class="chapter" data-level="10.2.4" data-path="07-regression_basic.html"><a href="#%E7%9B%B4%E7%B7%9A%E3%81%A8%E3%83%AD%E3%82%B8%E3%82%B9%E3%83%86%E3%82%A3%E3%83%83%E3%82%AF%E6%9B%B2%E7%B7%9A"><i class="fa fa-check"></i><b>10.2.4</b> 直線とロジスティック曲線</a></li>
<li class="chapter" data-level="10.2.5" data-path="07-regression_basic.html"><a href="#%E6%8E%A8%E5%AE%9A"><i class="fa fa-check"></i><b>10.2.5</b> 推定</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="07-regression_basic.html"><a href="#%E6%9C%80%E5%B0%A4%E6%8E%A8%E5%AE%9A%E4%BD%9C%E6%88%90%E4%B8%AD"><i class="fa fa-check"></i><b>10.3</b> 最尤推定（作成中）</a></li>
<li class="chapter" data-level="10.4" data-path="07-regression_basic.html"><a href="#%E8%A7%A3%E9%87%88%E3%82%92%E6%B7%B1%E3%82%81%E3%82%8B"><i class="fa fa-check"></i><b>10.4</b> 解釈を深める</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="07-regression_basic.html"><a href="#%E7%B7%9A%E5%BD%A2%E7%A2%BA%E7%8E%87%E3%83%A2%E3%83%87%E3%83%AB%E3%81%A8%E3%83%AD%E3%82%B8%E3%83%83%E3%83%88%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E6%AF%94%E8%BC%83"><i class="fa fa-check"></i><b>10.4.1</b> 線形確率モデルとロジットモデルの比較</a></li>
<li class="chapter" data-level="10.4.2" data-path="07-regression_basic.html"><a href="#%E5%B9%B3%E5%9D%87%E9%99%90%E7%95%8C%E5%8A%B9%E6%9E%9C"><i class="fa fa-check"></i><b>10.4.2</b> 平均限界効果</a></li>
<li class="chapter" data-level="10.4.3" data-path="07-regression_basic.html"><a href="#margins%E5%B9%B3%E5%9D%87%E9%99%90%E7%95%8C%E5%8A%B9%E6%9E%9C%E3%82%92%E8%A8%88%E7%AE%97%E3%81%99%E3%82%8B"><i class="fa fa-check"></i><b>10.4.3</b> margins()：平均限界効果を計算する</a></li>
<li class="chapter" data-level="10.4.4" data-path="07-regression_basic.html"><a href="#%E7%B7%9A%E5%BD%A2%E7%A2%BA%E7%8E%87%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E7%B5%90%E6%9E%9C%E3%81%A8%E3%81%AE%E6%AF%94%E8%BC%83"><i class="fa fa-check"></i><b>10.4.4</b> 線形確率モデルの結果との比較</a></li>
<li class="chapter" data-level="10.4.5" data-path="07-regression_basic.html"><a href="#%E3%83%AD%E3%82%B8%E3%83%83%E3%83%88%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E6%B3%A8%E6%84%8F%E7%82%B9%E3%83%A2%E3%83%87%E3%83%AB%E9%96%93%E6%AF%94%E8%BC%83"><i class="fa fa-check"></i><b>10.4.5</b> ロジットモデルの注意点：モデル間比較</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="07-regression_basic.html"><a href="#%E3%81%BE%E3%81%A8%E3%82%81"><i class="fa fa-check"></i><b>10.5</b> まとめ</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="paneldata.html"><a href="paneldata.html"><i class="fa fa-check"></i><b>11</b> パネルデータ分析（作成中）</a>
<ul>
<li class="chapter" data-level="11.1" data-path="07-regression_basic.html"><a href="#%E3%83%91%E3%83%8D%E3%83%AB%E3%83%87%E3%83%BC%E3%82%BF%E3%81%A8%E3%81%AF"><i class="fa fa-check"></i><b>11.1</b> パネルデータとは</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="07-regression_basic.html"><a href="#wide%E5%BD%A2%E5%BC%8F%E3%81%A8long%E5%BD%A2%E5%BC%8F"><i class="fa fa-check"></i><b>11.1.1</b> wide形式とlong形式</a></li>
<li class="chapter" data-level="11.1.2" data-path="07-regression_basic.html"><a href="#%E6%99%82%E9%96%93%E5%8F%AF%E5%A4%89%E3%81%A8%E6%99%82%E9%96%93%E4%B8%8D%E5%A4%89"><i class="fa fa-check"></i><b>11.1.2</b> 時間可変と時間不変</a></li>
<li class="chapter" data-level="11.1.3" data-path="07-regression_basic.html"><a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%83%87%E3%83%BC%E3%82%BF"><i class="fa fa-check"></i><b>11.1.3</b> サンプルデータ</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="07-regression_basic.html"><a href="#%E3%83%91%E3%83%8D%E3%83%AB%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E7%89%B9%E5%BE%B4%E8%A8%98%E8%BF%B0"><i class="fa fa-check"></i><b>11.2</b> パネルデータの特徴記述</a></li>
<li class="chapter" data-level="11.3" data-path="paneldata.html"><a href="paneldata.html#pooled-ols"><i class="fa fa-check"></i><b>11.3</b> Pooled OLS</a></li>
<li class="chapter" data-level="11.4" data-path="07-regression_basic.html"><a href="#%E5%9B%BA%E5%AE%9A%E5%8A%B9%E6%9E%9C%E3%83%A2%E3%83%87%E3%83%ABfixed-effect-model"><i class="fa fa-check"></i><b>11.4</b> 固定効果モデル（Fixed effect model）</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="07-regression_basic.html"><a href="#%E4%BA%8C%E6%96%B9%E5%90%91%E5%9B%BA%E5%AE%9A%E5%8A%B9%E6%9E%9C%E3%83%A2%E3%83%87%E3%83%ABtwo-way-fixed-effects-model"><i class="fa fa-check"></i><b>11.4.1</b> 二方向固定効果モデル（Two-way fixed effects model）</a></li>
<li class="chapter" data-level="11.4.2" data-path="07-regression_basic.html"><a href="#%E6%8E%A8%E5%AE%9A%E6%96%B9%E6%B3%95"><i class="fa fa-check"></i><b>11.4.2</b> 推定方法</a></li>
<li class="chapter" data-level="11.4.3" data-path="07-regression_basic.html"><a href="#%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%BF%E3%83%BC%E3%83%AD%E3%83%90%E3%82%B9%E3%83%88%E6%A8%99%E6%BA%96%E8%AA%A4%E5%B7%AE"><i class="fa fa-check"></i><b>11.4.3</b> クラスター・ロバスト標準誤差</a></li>
<li class="chapter" data-level="11.4.4" data-path="07-regression_basic.html"><a href="#%E5%9B%BA%E5%AE%9A%E5%8A%B9%E6%9E%9C%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E6%B3%A8%E6%84%8F%E7%82%B9"><i class="fa fa-check"></i><b>11.4.4</b> 固定効果モデルの注意点</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="domain.html"><a href="domain.html"><i class="fa fa-check"></i><b>12</b> 社会学のデータ分析でよくある処理</a>
<ul>
<li class="chapter" data-level="12.1" data-path="07-regression_basic.html"><a href="#ssm%E8%81%B7%E6%A5%AD%E5%B0%8F%E5%88%86%E9%A1%9E%E3%82%92%E5%A4%A7%E5%88%86%E9%A1%9E%E3%81%AB%E3%81%BE%E3%81%A8%E3%82%81%E3%82%8B"><i class="fa fa-check"></i><b>12.1</b> SSM職業小分類を大分類にまとめる</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="07-regression_basic.html"><a href="#jgss%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-check"></i><b>12.1.1</b> JGSSの場合</a></li>
<li class="chapter" data-level="12.1.2" data-path="07-regression_basic.html"><a href="#ssm%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-check"></i><b>12.1.2</b> SSMの場合</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="07-regression_basic.html"><a href="#%E6%97%A7%E5%88%B6%E5%AD%A6%E6%AD%B4%E3%81%A8%E6%96%B0%E5%88%B6%E5%AD%A6%E6%AD%B4%E3%81%AE%E5%AF%BE%E5%BF%9C"><i class="fa fa-check"></i><b>12.2</b> 旧制学歴と新制学歴の対応</a></li>
<li class="chapter" data-level="12.3" data-path="domain.html"><a href="domain.html#domain_income"><i class="fa fa-check"></i><b>12.3</b> 年収カテゴリを連続変数にする</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="07-regression_basic.html"><a href="#%E5%B9%B4%E5%8F%8E%E3%82%92%E9%80%A3%E7%B6%9A%E5%A4%89%E6%95%B0%E3%81%AB%E3%81%99%E3%82%8B"><i class="fa fa-check"></i><b>12.3.1</b> 年収を連続変数にする</a></li>
<li class="chapter" data-level="12.3.2" data-path="07-regression_basic.html"><a href="#%E6%99%82%E9%96%93%E3%81%82%E3%81%9F%E3%82%8A%E8%B3%83%E9%87%91%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B"><i class="fa fa-check"></i><b>12.3.2</b> 時間あたり賃金を作成する</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="07-regression_basic.html"><a href="#%E9%83%BD%E9%81%93%E5%BA%9C%E7%9C%8C%E5%A4%89%E6%95%B0%E3%81%AE%E5%8A%A0%E5%B7%A5"><i class="fa fa-check"></i><b>12.4</b> 都道府県変数の加工</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="07-regression_basic.html"><a href="#%E9%83%BD%E9%81%93%E5%BA%9C%E7%9C%8C%E3%81%AB%E3%83%A9%E3%83%99%E3%83%AB%E3%82%92%E3%81%A4%E3%81%91%E3%82%8B"><i class="fa fa-check"></i><b>12.4.1</b> 都道府県にラベルをつける</a></li>
<li class="chapter" data-level="12.4.2" data-path="07-regression_basic.html"><a href="#%E9%83%BD%E9%81%93%E5%BA%9C%E7%9C%8C%E3%83%AC%E3%83%99%E3%83%AB%E3%81%AE%E6%8C%87%E6%A8%99%E3%82%92%E5%A4%96%E6%8C%BF%E3%81%99%E3%82%8B"><i class="fa fa-check"></i><b>12.4.2</b> 都道府県レベルの指標を外挿する</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="07-regression_basic.html"><a href="#ssm%E8%81%B7%E6%AD%B4%E3%83%87%E3%83%BC%E3%82%BF%E3%81%8B%E3%82%89%E7%8F%BE%E8%81%B7%E3%81%AE%E5%8B%A4%E7%B6%9A%E5%B9%B4%E6%95%B0%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B"><i class="fa fa-check"></i><b>12.5</b> SSM職歴データから現職の勤続年数を作成する</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="writepaper.html"><a href="writepaper.html"><i class="fa fa-check"></i><b>13</b> 論文のまとめ方</a>
<ul>
<li class="chapter" data-level="13.1" data-path="07-regression_basic.html"><a href="#%E5%85%A8%E4%BD%93%E3%81%AE%E6%A7%8B%E6%88%90"><i class="fa fa-check"></i><b>13.1</b> 全体の構成</a></li>
<li class="chapter" data-level="13.2" data-path="07-regression_basic.html"><a href="#%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB"><i class="fa fa-check"></i><b>13.2</b> タイトル</a></li>
<li class="chapter" data-level="13.3" data-path="07-regression_basic.html"><a href="#%E8%A6%81%E7%B4%84"><i class="fa fa-check"></i><b>13.3</b> 要約</a></li>
<li class="chapter" data-level="13.4" data-path="07-regression_basic.html"><a href="#%E5%BA%8F%E8%AB%96"><i class="fa fa-check"></i><b>13.4</b> 序論</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="07-regression_basic.html"><a href="#%E5%95%8F%E9%A1%8C%E8%83%8C%E6%99%AF1%E6%AE%B5%E8%90%BD"><i class="fa fa-check"></i><b>13.4.1</b> 問題背景（1段落）</a></li>
<li class="chapter" data-level="13.4.2" data-path="07-regression_basic.html"><a href="#%E5%85%88%E8%A1%8C%E7%A0%94%E7%A9%B6%E3%81%AE%E6%A4%9C%E8%A8%8E12%E6%AE%B5%E8%90%BD"><i class="fa fa-check"></i><b>13.4.2</b> 先行研究の検討（1–2段落）</a></li>
<li class="chapter" data-level="13.4.3" data-path="07-regression_basic.html"><a href="#%E7%A0%94%E7%A9%B6%E7%9B%AE%E7%9A%84%E3%81%A8%E6%96%B9%E6%B3%9512%E6%AE%B5%E8%90%BD"><i class="fa fa-check"></i><b>13.4.3</b> 研究目的と方法（1–2段落）</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="07-regression_basic.html"><a href="#%E5%85%88%E8%A1%8C%E7%A0%94%E7%A9%B6%E7%90%86%E8%AB%96%E6%9E%A0%E7%B5%84%E3%81%BF%E4%BB%AE%E8%AA%AC"><i class="fa fa-check"></i><b>13.5</b> 先行研究・理論枠組み・仮説</a></li>
<li class="chapter" data-level="13.6" data-path="07-regression_basic.html"><a href="#%E6%96%B9%E6%B3%95"><i class="fa fa-check"></i><b>13.6</b> 方法</a>
<ul>
<li class="chapter" data-level="13.6.1" data-path="07-regression_basic.html"><a href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%81%A8%E5%88%86%E6%9E%90%E5%AF%BE%E8%B1%A1"><i class="fa fa-check"></i><b>13.6.1</b> データと分析対象</a></li>
<li class="chapter" data-level="13.6.2" data-path="07-regression_basic.html"><a href="#%E5%A4%89%E6%95%B0"><i class="fa fa-check"></i><b>13.6.2</b> 変数</a></li>
<li class="chapter" data-level="13.6.3" data-path="07-regression_basic.html"><a href="#%E5%88%86%E6%9E%90%E6%89%8B%E6%B3%95"><i class="fa fa-check"></i><b>13.6.3</b> 分析手法</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="07-regression_basic.html"><a href="#%E7%B5%90%E6%9E%9C"><i class="fa fa-check"></i><b>13.7</b> 結果</a>
<ul>
<li class="chapter" data-level="13.7.1" data-path="07-regression_basic.html"><a href="#%E8%A8%98%E8%BF%B0%E7%9A%84%E5%88%86%E6%9E%90"><i class="fa fa-check"></i><b>13.7.1</b> 記述的分析</a></li>
<li class="chapter" data-level="13.7.2" data-path="07-regression_basic.html"><a href="#%E5%9B%9E%E5%B8%B0%E5%88%86%E6%9E%90"><i class="fa fa-check"></i><b>13.7.2</b> 回帰分析</a></li>
</ul></li>
<li class="chapter" data-level="13.8" data-path="07-regression_basic.html"><a href="#%E7%B5%90%E8%AB%96"><i class="fa fa-check"></i><b>13.8</b> 結論</a>
<ul>
<li class="chapter" data-level="13.8.1" data-path="07-regression_basic.html"><a href="#%E8%83%8C%E6%99%AF%E3%81%A8%E7%9B%AE%E7%9A%84%E3%81%AE%E5%86%8D%E7%A2%BA%E8%AA%8D1%E6%AE%B5%E8%90%BD"><i class="fa fa-check"></i><b>13.8.1</b> 背景と目的の再確認（1段落）</a></li>
<li class="chapter" data-level="13.8.2" data-path="07-regression_basic.html"><a href="#%E5%88%86%E6%9E%90%E7%B5%90%E6%9E%9C%E3%81%AE%E8%A6%81%E7%B4%84%E3%81%A8%E8%A7%A3%E9%87%8824%E6%AE%B5%E8%90%BD"><i class="fa fa-check"></i><b>13.8.2</b> 分析結果の要約と解釈（2–4段落）</a></li>
<li class="chapter" data-level="13.8.3" data-path="07-regression_basic.html"><a href="#%E8%AA%B2%E9%A1%8C%E9%99%90%E7%95%8C1%E6%AE%B5%E8%90%BD"><i class="fa fa-check"></i><b>13.8.3</b> 課題・限界（1段落）</a></li>
<li class="chapter" data-level="13.8.4" data-path="07-regression_basic.html"><a href="#%E3%81%BE%E3%81%A8%E3%82%811%E6%AE%B5%E8%90%BD%E4%BB%BB%E6%84%8F"><i class="fa fa-check"></i><b>13.8.4</b> まとめ（1段落、任意）</a></li>
</ul></li>
<li class="chapter" data-level="13.9" data-path="07-regression_basic.html"><a href="#%E8%AC%9D%E8%BE%9E"><i class="fa fa-check"></i><b>13.9</b> 謝辞</a></li>
<li class="chapter" data-level="13.10" data-path="07-regression_basic.html"><a href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><i class="fa fa-check"></i><b>13.10</b> 参考文献</a>
<ul>
<li class="chapter" data-level="13.10.1" data-path="07-regression_basic.html"><a href="#%E6%9B%B8%E7%B1%8D%E3%81%AE%E5%A0%B4%E5%90%88%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9"><i class="fa fa-check"></i><b>13.10.1</b> 書籍の場合の書き方</a></li>
<li class="chapter" data-level="13.10.2" data-path="07-regression_basic.html"><a href="#%E7%B7%A8%E8%91%97%E6%9B%B8%E7%B1%8D%E4%B8%AD%E3%81%AE%E8%AB%96%E6%96%87%E3%81%AE%E5%A0%B4%E5%90%88%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9"><i class="fa fa-check"></i><b>13.10.2</b> 編著書籍中の論文の場合の書き方</a></li>
<li class="chapter" data-level="13.10.3" data-path="07-regression_basic.html"><a href="#%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%81%AE%E9%9B%91%E8%AA%8C%E8%AB%96%E6%96%87%E3%81%AE%E5%A0%B4%E5%90%88%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9"><i class="fa fa-check"></i><b>13.10.3</b> 日本語の雑誌論文の場合の書き方</a></li>
<li class="chapter" data-level="13.10.4" data-path="07-regression_basic.html"><a href="#%E8%8B%B1%E8%AA%9E%E3%81%AE%E9%9B%91%E8%AA%8C%E8%AB%96%E6%96%87%E3%81%AE%E5%A0%B4%E5%90%88%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9"><i class="fa fa-check"></i><b>13.10.4</b> 英語の雑誌論文の場合の書き方</a></li>
<li class="chapter" data-level="13.10.5" data-path="07-regression_basic.html"><a href="#%E8%8B%B1%E8%AA%9E%E3%81%AE%E6%9B%B8%E7%B1%8D%E3%81%AE%E5%A0%B4%E5%90%88%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9"><i class="fa fa-check"></i><b>13.10.5</b> 英語の書籍の場合の書き方</a></li>
<li class="chapter" data-level="13.10.6" data-path="07-regression_basic.html"><a href="#%E7%BF%BB%E8%A8%B3%E6%9B%B8%E3%81%AE%E5%A0%B4%E5%90%88%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9"><i class="fa fa-check"></i><b>13.10.6</b> 翻訳書の場合の書き方</a></li>
<li class="chapter" data-level="13.10.7" data-path="07-regression_basic.html"><a href="#%E3%82%A6%E3%82%A7%E3%83%96%E3%82%B5%E3%82%A4%E3%83%88%E3%81%AE%E5%A0%B4%E5%90%88%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9"><i class="fa fa-check"></i><b>13.10.7</b> ウェブサイトの場合の書き方</a></li>
</ul></li>
<li class="chapter" data-level="13.11" data-path="07-regression_basic.html"><a href="#%E3%81%9D%E3%81%AE%E3%81%BB%E3%81%8B%E3%81%AE%E5%BD%A2%E5%BC%8F%E4%B8%8A%E3%81%AE%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85"><i class="fa fa-check"></i><b>13.11</b> そのほかの形式上の注意事項</a>
<ul>
<li class="chapter" data-level="13.11.1" data-path="07-regression_basic.html"><a href="#%E6%8E%A8%E5%A5%A8%E3%81%99%E3%82%8Bword%E3%81%AE%E8%A8%AD%E5%AE%9A"><i class="fa fa-check"></i><b>13.11.1</b> 推奨するWordの設定</a></li>
<li class="chapter" data-level="13.11.2" data-path="07-regression_basic.html"><a href="#%E5%BC%95%E7%94%A8%E3%81%AE%E5%BD%A2%E5%BC%8F"><i class="fa fa-check"></i><b>13.11.2</b> 引用の形式</a></li>
<li class="chapter" data-level="13.11.3" data-path="07-regression_basic.html"><a href="#%E5%9B%B3%E8%A1%A8%E3%81%AE%E5%BD%A2%E5%BC%8F"><i class="fa fa-check"></i><b>13.11.3</b> 図表の形式</a></li>
<li class="chapter" data-level="13.11.4" data-path="07-regression_basic.html"><a href="#%E8%84%9A%E6%B3%A8"><i class="fa fa-check"></i><b>13.11.4</b> 脚注</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="presentation.html"><a href="presentation.html"><i class="fa fa-check"></i><b>14</b> 研究発表をする</a>
<ul>
<li class="chapter" data-level="14.1" data-path="07-regression_basic.html"><a href="#%E7%99%BA%E8%A1%A8%E3%81%AE%E6%A7%8B%E6%88%90"><i class="fa fa-check"></i><b>14.1</b> 発表の構成</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="07-regression_basic.html"><a href="#%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB-1"><i class="fa fa-check"></i><b>14.1.1</b> タイトル</a></li>
<li class="chapter" data-level="14.1.2" data-path="07-regression_basic.html"><a href="#%E5%BA%8F%E8%AB%96-1"><i class="fa fa-check"></i><b>14.1.2</b> 序論</a></li>
<li class="chapter" data-level="14.1.3" data-path="07-regression_basic.html"><a href="#%E6%96%B9%E6%B3%95-1"><i class="fa fa-check"></i><b>14.1.3</b> 方法</a></li>
<li class="chapter" data-level="14.1.4" data-path="07-regression_basic.html"><a href="#%E5%88%86%E6%9E%90%E7%B5%90%E6%9E%9C"><i class="fa fa-check"></i><b>14.1.4</b> 分析結果</a></li>
<li class="chapter" data-level="14.1.5" data-path="07-regression_basic.html"><a href="#%E7%B5%90%E8%AB%96-1"><i class="fa fa-check"></i><b>14.1.5</b> 結論</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="07-regression_basic.html"><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E7%99%BA%E8%A1%A8%E3%81%AB%E9%9A%9B%E3%81%97%E3%81%A6%E6%B0%97%E3%82%92%E3%81%A4%E3%81%91%E3%82%8B%E3%81%A8%E3%82%88%E3%81%84%E3%81%93%E3%81%A8"><i class="fa fa-check"></i><b>14.2</b> その他発表に際して気をつけるとよいこと</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="07-regression_basic.html"><a href="#%E4%BA%8B%E5%89%8D%E3%81%AB%E7%99%BA%E8%A1%A8%E7%B7%B4%E7%BF%92%E3%82%92%E3%81%99%E3%82%8B"><i class="fa fa-check"></i><b>14.2.1</b> 事前に発表練習をする</a></li>
<li class="chapter" data-level="14.2.2" data-path="07-regression_basic.html"><a href="#%E6%96%87%E5%AD%97%E3%81%AF%E5%A4%A7%E3%81%8D%E3%81%8F%E5%B0%91%E3%81%AA%E3%81%8F"><i class="fa fa-check"></i><b>14.2.2</b> 文字は大きく少なく</a></li>
<li class="chapter" data-level="14.2.3" data-path="07-regression_basic.html"><a href="#%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%89%E3%81%AB%E3%81%AF%E3%83%9A%E3%83%BC%E3%82%B8%E6%95%B0%E3%82%92%E6%9B%B8%E3%81%8F"><i class="fa fa-check"></i><b>14.2.3</b> スライドにはページ数を書く</a></li>
<li class="chapter" data-level="14.2.4" data-path="07-regression_basic.html"><a href="#%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%89%E3%81%A4%E3%81%8F%E3%82%8A%E3%81%AE%E5%8F%82%E8%80%83%E8%B3%87%E6%96%99"><i class="fa fa-check"></i><b>14.2.4</b> スライドつくりの参考資料</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="reference.html"><a href="reference.html"><i class="fa fa-check"></i><b>15</b> さらなる学習のための参考文献等</a>
<ul>
<li class="chapter" data-level="15.1" data-path="07-regression_basic.html"><a href="#%E5%AE%9F%E8%A8%BC%E7%A0%94%E7%A9%B6%E3%81%AE%E5%9F%BA%E7%A4%8E%E3%82%B9%E3%82%AD%E3%83%AB"><i class="fa fa-check"></i><b>15.1</b> 実証研究の基礎スキル</a></li>
<li class="chapter" data-level="15.2" data-path="07-regression_basic.html"><a href="#r%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9"><i class="fa fa-check"></i><b>15.2</b> Rの使い方</a></li>
<li class="chapter" data-level="15.3" data-path="07-regression_basic.html"><a href="#ggplot%E3%81%AE%E8%A7%A3%E8%AA%AC"><i class="fa fa-check"></i><b>15.3</b> ggplotの解説</a></li>
<li class="chapter" data-level="15.4" data-path="07-regression_basic.html"><a href="#%E7%B5%B1%E8%A8%88%E5%AD%A6%E8%A8%88%E9%87%8F%E5%88%86%E6%9E%90%E3%82%92%E5%AD%A6%E3%81%B6"><i class="fa fa-check"></i><b>15.4</b> 統計学・計量分析を学ぶ</a></li>
<li class="chapter" data-level="15.5" data-path="07-regression_basic.html"><a href="#%E7%B0%A1%E5%8D%98%E3%81%AB%E5%88%A9%E7%94%A8%E3%81%A7%E3%81%8D%E3%82%8B%E5%80%8B%E7%A5%A8%E3%83%87%E3%83%BC%E3%82%BF"><i class="fa fa-check"></i><b>15.5</b> 簡単に利用できる個票データ</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Rによる社会調査データ分析の手引き</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="regression_basic" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Chapter 7</span> 回帰分析の基礎<a href="regression_basic.html#regression_basic" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>本章では、回帰分析の基礎について説明する。</p>
<p>内容に入る前に、右上のプロジェクトのボックスの横が、前章で作成したプロジェクトの名前（たとえば、seminar_sociology_r）になっているかどうかを確認しておこう。なっていない場合は、右上のボックスをクリックして、「Open Project…」を選択し、前章で作成したRprojファイル（たとえば、seminar_sociology_r.Rprojといったような名前になっている）を選んで、プロジェクトを切り替えよう。</p>
<p>さらに、これまでの章で説明した以下のパッケージを読み込んだ上で、<a href="handling.html#handling">第4章</a>で作成したデータを読み込んで<code>piaac</code>というデータフレームに入れていることを前提とする。具体的には、以下のコードを実行しておく必要がある。</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="regression_basic.html#cb250-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb250-2"><a href="regression_basic.html#cb250-2" tabindex="-1"></a><span class="fu">library</span>(gtsummary)</span>
<span id="cb250-3"><a href="regression_basic.html#cb250-3" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="cb250-4"><a href="regression_basic.html#cb250-4" tabindex="-1"></a></span>
<span id="cb250-5"><a href="regression_basic.html#cb250-5" tabindex="-1"></a>piaac <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">&quot;data/piaac_sample_analytic.rds&quot;</span>)</span></code></pre></div>
<p><a href="descriptives.html#descriptives_ggplot">第5章で確認したように</a>、ggplotの設定を変更しておくことで見やすいグラフを作ることができる。ここでは以下のコードを実行している。</p>
<p>Macの場合：</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="regression_basic.html#cb251-1" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_bw</span>(</span>
<span id="cb251-2"><a href="regression_basic.html#cb251-2" tabindex="-1"></a>  <span class="at">base_family =</span> <span class="st">&quot;HiraginoSans-W3&quot;</span>,</span>
<span id="cb251-3"><a href="regression_basic.html#cb251-3" tabindex="-1"></a>  <span class="at">base_size =</span> <span class="dv">11</span>,</span>
<span id="cb251-4"><a href="regression_basic.html#cb251-4" tabindex="-1"></a>  <span class="at">base_rect_size =</span> <span class="fl">0.2</span>,</span>
<span id="cb251-5"><a href="regression_basic.html#cb251-5" tabindex="-1"></a>  <span class="at">base_line_size =</span> <span class="fl">0.2</span></span>
<span id="cb251-6"><a href="regression_basic.html#cb251-6" tabindex="-1"></a>))</span></code></pre></div>
<p>Windowsの場合：</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="regression_basic.html#cb252-1" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_bw</span>(</span>
<span id="cb252-2"><a href="regression_basic.html#cb252-2" tabindex="-1"></a>  <span class="at">base_size =</span> <span class="dv">11</span>,</span>
<span id="cb252-3"><a href="regression_basic.html#cb252-3" tabindex="-1"></a>  <span class="at">base_rect_size =</span> <span class="fl">0.2</span>,</span>
<span id="cb252-4"><a href="regression_basic.html#cb252-4" tabindex="-1"></a>  <span class="at">base_line_size =</span> <span class="fl">0.2</span></span>
<span id="cb252-5"><a href="regression_basic.html#cb252-5" tabindex="-1"></a>))</span></code></pre></div>
<div id="回帰分析とは何か" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> 回帰分析とは何か<a href="#%E5%9B%9E%E5%B8%B0%E5%88%86%E6%9E%90%E3%81%A8%E3%81%AF%E4%BD%95%E3%81%8B" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="散布図を眺める" class="section level3 hasAnchor" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> 散布図を眺める<a href="#%E6%95%A3%E5%B8%83%E5%9B%B3%E3%82%92%E7%9C%BA%E3%82%81%E3%82%8B" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>数的思考力スコア（<code>numeracy</code>）が高いほど賃金（時給換算）が高いという傾向があるかどうかを知りたいとする。このとき、年齢を横軸、賃金を縦軸とする散布図を書いてみる。</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="regression_basic.html#cb253-1" tabindex="-1"></a>piaac <span class="sc">%&gt;%</span> </span>
<span id="cb253-2"><a href="regression_basic.html#cb253-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> numeracy, <span class="at">y =</span> wage)) <span class="sc">+</span> </span>
<span id="cb253-3"><a href="regression_basic.html#cb253-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="seminar_doc_files/figure-html/unnamed-chunk-179-1.png" width="672" /></p>
<p>なんとなく、数的思考力スコアが高いほど賃金が高い傾向があるようにみえる。この関係を1つの直線で要約するとしたらどのようになるだろう？この直線を示したのが次の図になる。</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="regression_basic.html#cb254-1" tabindex="-1"></a>piaac <span class="sc">%&gt;%</span> </span>
<span id="cb254-2"><a href="regression_basic.html#cb254-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> numeracy, <span class="at">y =</span> wage)) <span class="sc">+</span> </span>
<span id="cb254-3"><a href="regression_basic.html#cb254-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb254-4"><a href="regression_basic.html#cb254-4" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="seminar_doc_files/figure-html/unnamed-chunk-180-1.png" width="672" /></p>
</div>
<div id="回帰式の読み方" class="section level3 hasAnchor" number="7.1.2">
<h3><span class="header-section-number">7.1.2</span> 回帰式の読み方<a href="#%E5%9B%9E%E5%B8%B0%E5%BC%8F%E3%81%AE%E8%AA%AD%E3%81%BF%E6%96%B9" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>このように、2つの変数の関係を<span class="math inline">\(y = f(x)\)</span>というような関数で表現する分析方法を指して、<strong>回帰分析 regression analysis/regression model</strong> という。とくに、今y軸に置かれている変数 （賃金）は、数的思考力スコアによって説明される変数であるという意味で、<strong>被説明変数 explained variable</strong>または<strong>従属変数 dependent variable</strong>、x軸に置かれている変数（数的思考力スコア）は、賃金を説明する変数であるという意味で、<strong>説明変数 explanatory variable</strong>または<strong>独立変数 independent variable</strong>という。</p>
<p>今回の式は、次のようなかたちになる<a href="#fn16" class="footnote-ref" id="fnref16"><sup>16</sup></a>。</p>
<p><span class="math display">\[
y = \beta_0 + \beta_1x
\]</span></p>
<p>今の例の場合は、<span class="math inline">\(y\)</span>は賃金、<span class="math inline">\(x\)</span>は年齢である。<span class="math inline">\(\beta_k\)</span>のことを<strong>係数 coefficient</strong> といい、なかでもとくに<span class="math inline">\(\beta_0\)</span>のことを<strong>切片 intercept</strong>、<span class="math inline">\(\beta_1\)</span>のことを<strong>傾き slope</strong> という。傾きは、<span class="math inline">\(x\)</span>が1単位増えると（<span class="math inline">\(\Delta x = 1\)</span>）に<span class="math inline">\(y\)</span>がどれだけ変化するかを表す。</p>
<p>ここで関心があるのは傾きの係数の値である。これが正であれば、<span class="math inline">\(x\)</span>が高いほど<span class="math inline">\(y\)</span>は高いという正の関係を表すし、負であれば、<span class="math inline">\(x\)</span>が高いほど<span class="math inline">\(y\)</span>は低いという負の関係を表す。絶対値が大きいほど、$x$1単位の変化に対して <span class="math inline">\(y\)</span>がより大きく変わるということを表すので、たんに正か負かというだけでなく、その値も重要である。</p>
<p>今回の場合は係数はどうなるだろうか？線形回帰分析を推定するときのコマンドが<code>lm()</code>である<a href="#fn17" class="footnote-ref" id="fnref17"><sup>17</sup></a>。<code>lm(data = xx, formula = )</code>という書き方になる。<code>formula =</code>の部分は省略しても大丈夫。</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="regression_basic.html#cb256-1" tabindex="-1"></a><span class="fu">lm</span>(<span class="at">data =</span> piaac, <span class="at">formula =</span> wage <span class="sc">~</span> numeracy)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = wage ~ numeracy, data = piaac)
## 
## Coefficients:
## (Intercept)     numeracy  
##    -521.073        7.849</code></pre>
<p>(Intercept)の部分が切片<span class="math inline">\(\beta_0\)</span>、numeracyの部分がnumeracyの傾き<span class="math inline">\(\beta_1\)</span>にそれぞれ対応する。したがって、賃金と年齢の関係は以下の式のように表されるということを意味する：</p>
<p><span class="math display">\[
y = -521.1 + 7.8x
\]</span></p>
</div>
<div id="回帰式の決め方最小二乗法" class="section level3 hasAnchor" number="7.1.3">
<h3><span class="header-section-number">7.1.3</span> 回帰式の決め方：最小二乗法<a href="#%E5%9B%9E%E5%B8%B0%E5%BC%8F%E3%81%AE%E6%B1%BA%E3%82%81%E6%96%B9%E6%9C%80%E5%B0%8F%E4%BA%8C%E4%B9%97%E6%B3%95" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>もちろん、上記の回帰式は散布図をみて直観でえいやっと式の値を決めたのではなく、全体の傾向をもっともよく要約するような係数を推定している。その係数の推定方法を<strong>最小二乗法 ordinary least square, OLS</strong>という。</p>
<p>最小二乗法の意味は図にするとわかりやすい。例えば、次のような散布図と、そこに引いた直線を考えよう。</p>
<p><img src="seminar_doc_files/figure-html/unnamed-chunk-183-1.png" width="672" /></p>
<p>このとき、散布図の各点の座標を<span class="math inline">\((x_i, y_i)\)</span>と表すことにしよう。すると、各点のy座標の位置<span class="math inline">\(y_i\)</span>は、（1）回帰直線の式に<span class="math inline">\(x_i\)</span>を当てはめた値と、（2）そこからのずれ（<span class="math inline">\(r_i\)</span>とする）の和として表すことができる。すなわち：</p>
<p><span class="math display">\[
y_i = \beta_0 + \beta_1x_{i} + r_i
\]</span></p>
<p>この<span class="math inline">\(r_i\)</span>というのは、散布図の点からx軸に垂線を下ろしたときの、回帰直線との交点までの距離を表している。図で考えると次のようになる。</p>
<p><img src="seminar_doc_files/figure-html/unnamed-chunk-184-1.png" width="672" /></p>
<p>ずれ<span class="math inline">\(r_i\)</span>のことを、<strong>残差（residuals）</strong>という。散布図に直線を引く方法はたくさんあるのだが、最小二乗法では、上記の残差の二乗和を最も小さくするような直線が散布図全体の傾向をもっともよく反映する直線だとみなして、切片と傾きのパラメータを推定する。式で書くとつぎのようになる。</p>
<p><span class="math display">\[
\sum_{i = 1}^N r_i^2 = \sum_{i = 1}^N(y_i - (\beta_0 + \beta_1x_{i}))^2
\]</span></p>
<p>この式を最小にするような<span class="math inline">\(\beta_0, \beta_1\)</span>を求めるということになる。上式は<span class="math inline">\(\beta_0, \beta_1\)</span>に関して下に凸な二次関数であるので、<span class="math inline">\(\beta_0\)</span>について微分した値と<span class="math inline">\(\beta_1\)</span>について微分した値が同時に0になるような<span class="math inline">\(\beta_0, \beta_1\)</span>というのが、上式を最小にするようなパラメータだ、ということになる。</p>
<p><span class="math display">\[
\left\{
\begin{align}
\frac{\partial}{\partial\beta_0}\sum_{i = 1}^N(y_i - (\beta_0 + \beta_1x_{i}))^2 &amp;= 0\\
\frac{\partial}{\partial\beta_1}\sum_{i = 1}^N(y_i - (\beta_0 + \beta_1x_{i}))^2 &amp;= 0\\
\end{align}
\right.
\]</span></p>
<p>これより先のくわしい証明は省略するが、いずれにしてもポイントは、回帰直線は「回帰直線と各点とのずれ（残差）の二乗和が最も小さくなるように引かれた線だ」ということである。</p>
</div>
<div id="母集団における関係の推測" class="section level3 hasAnchor" number="7.1.4">
<h3><span class="header-section-number">7.1.4</span> 母集団における関係の推測<a href="#%E6%AF%8D%E9%9B%86%E5%9B%A3%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E9%96%A2%E4%BF%82%E3%81%AE%E6%8E%A8%E6%B8%AC" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>今回分析しているのはあくまで母集団から抽出された標本（サンプル）であり、本当に知りたいのは母集団においても確かに関係があるといえるかどうかである。今回のサンプルにおいて推定された係数は偶然生じたものではなく、母集団においても確かに正であるということはできるのだろうか。</p>
<p>まずはいったん、回帰分析の結果をオブジェクトに格納しよう。</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="regression_basic.html#cb258-1" tabindex="-1"></a>reg_res <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> piaac, wage <span class="sc">~</span> numeracy)</span></code></pre></div>
<p>結果は、<code>summary()</code>でよびだすことができる。呼び出した結果には、先ほどの疑問に答えるための情報が含まれている。</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="regression_basic.html#cb259-1" tabindex="-1"></a><span class="fu">summary</span>(reg_res)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = wage ~ numeracy, data = piaac)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -1774.0  -716.6  -304.5   373.9  8360.5 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) -521.0726   151.8525  -3.431 0.000609 ***
## numeracy       7.8491     0.5098  15.396  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1143 on 2726 degrees of freedom
## Multiple R-squared:   0.08,  Adjusted R-squared:  0.07966 
## F-statistic:   237 on 1 and 2726 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>1列目のEstimateの列には、先ほどみたように係数の値が表示される。</p>
<p>2列目のStd. Errorの列が<strong>標準誤差 standard error</strong>を表し、得られた係数のばらつき（標準偏差）を示している。標準誤差は、次に述べるp値の計算に使われている<a href="#fn18" class="footnote-ref" id="fnref18"><sup>18</sup></a>。</p>
<p>4列めのPr(&gt;|t|)の列が<strong>p値 p-value</strong>を表している。p値は「もし母集団において係数が0であるという帰無仮説が正しいとしたときに、今回のような係数の値となる確率」を表している。この値が十分に低いのならば、帰無仮説を棄却して、たしかに母集団においても係数は0でなさそうだ（正あるいは負だ）、ということを自信をもって主張できるということになる。</p>
<p>numeracyの行のp値は0.001よりずっと低いことがわかる。つまり、母集団において年齢の係数が0であったとしたら、今回のような係数の値が得られる確率はとても低い（0.001 = 0.1%未満）、ということである。</p>
<p>この確率がどれくらい低ければ自信をもって関係があると言えるのか？ということについて、慣習的には、0.05という基準が使われている。Rでは、0.05よりも小さければ（正確には0.01 ≤ p &lt; 0.05）、p値の横に<code>*</code>という印がつく。同じようにして、0.01よりも小さければ（0.001 ≤ p &lt; 0.01）<code>**</code>、0.001よりも小さければ（p &lt; 0.001）、<code>***</code>という印がつく。</p>
<p>このように、「母集団において係数が0であったとしたら、今回のような係数の値が得られる確率は十分に低い（0.05未満である）」ことを慣習的に「統計的に有意」と表記したり「有意差がある」などと表記する。基本的には、統計的に有意でないならば、係数が正であったり負であったりしても、その結果を（母集団においても関係が正だ／負だ、というふうに）強く論じることはできないと考えておけばよい。</p>
</div>
</div>
<div id="独立変数がカテゴリ変数の場合" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> 独立変数がカテゴリ変数の場合<a href="#%E7%8B%AC%E7%AB%8B%E5%A4%89%E6%95%B0%E3%81%8C%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E5%A4%89%E6%95%B0%E3%81%AE%E5%A0%B4%E5%90%88" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="値のカテゴリ" class="section level3 hasAnchor" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> 2値のカテゴリ<a href="#%E5%80%A4%E3%81%AE%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>線形回帰分析では、連続変数だけではなく、カテゴリ変数も扱うことができる。その例としてまず、性別によって賃金がどの程度異なるのかを知りたいとする。このとき、（無理やり）散布図を書くと、次のようになる。分布がわかりやすいように点は水平方向に少し散らして表示している。</p>
<p><img src="seminar_doc_files/figure-html/unnamed-chunk-187-1.png" width="672" /></p>
<p>ここで得られた男性の平均値と女性の平均値をそれぞれ散布図に書き入れてみたのが次の図である。実線が男性の平均値、点線が女性の平均値を表している。</p>
<p><img src="seminar_doc_files/figure-html/unnamed-chunk-189-1.png" width="672" /></p>
<p>いま、男性であれば1、女性であれば0をとる変数<span class="math inline">\(x\)</span>を考えよう。このように、カテゴリ変数のカテゴリを区別するために便宜的に0/1の値を振った変数のことを、<strong>ダミー変数 dummy variable</strong>という。このとき、性別による賃金の違いを表す回帰式は次のようになる：</p>
<p><span class="math display">\[
y = \beta_0 + \beta_1x
\]</span></p>
<p>回帰式のかたちは先ほどと同じとなる。傾き<span class="math inline">\(\beta_1\)</span>は、女性（0）とくらべて男性（1）がどの程度賃金が高いのかを示している。実際、この係数を推定してみよう。</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="regression_basic.html#cb261-1" tabindex="-1"></a>piaac <span class="ot">&lt;-</span> piaac <span class="sc">%&gt;%</span> </span>
<span id="cb261-2"><a href="regression_basic.html#cb261-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">male_d =</span> <span class="fu">case_when</span>(</span>
<span id="cb261-3"><a href="regression_basic.html#cb261-3" tabindex="-1"></a>    gender <span class="sc">==</span> <span class="st">&quot;男性&quot;</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb261-4"><a href="regression_basic.html#cb261-4" tabindex="-1"></a>    gender <span class="sc">==</span> <span class="st">&quot;女性&quot;</span> <span class="sc">~</span> <span class="dv">0</span></span>
<span id="cb261-5"><a href="regression_basic.html#cb261-5" tabindex="-1"></a>  ))</span></code></pre></div>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="regression_basic.html#cb262-1" tabindex="-1"></a>reg_res <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> piaac, wage <span class="sc">~</span> male_d)</span>
<span id="cb262-2"><a href="regression_basic.html#cb262-2" tabindex="-1"></a><span class="fu">summary</span>(reg_res)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = wage ~ male_d, data = piaac)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -1733.1  -612.4  -329.3   368.6  7438.4 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  1339.12      31.03   43.16   &lt;2e-16 ***
## male_d        856.38      42.65   20.08   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1112 on 2726 degrees of freedom
## Multiple R-squared:  0.1289, Adjusted R-squared:  0.1285 
## F-statistic: 403.2 on 1 and 2726 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>male_dというのが、性別が男性のときに1、女性のときに0をとる変数である。この係数は傾き<span class="math inline">\(\beta_1\)</span>に対応し、切片（Intercept）は切片<span class="math inline">\(\beta_0\)</span>に対応する。つまり、推定された式は次のようになる：</p>
<p><span class="math display">\[
y = 1339 + 856x
\]</span></p>
<p>つまり、女性（x = 0）とくらべて男性（x = 1）の賃金は856円高いということを意味している。</p>
<p>この値が、先ほど散布図に示した男性の平均値と女性の平均値の差に一致していることを確認しよう。すなわち、2値のカテゴリ変数を独立変数として用いる場合、傾きの値は、2つのカテゴリの平均値の差を表している。</p>
</div>
<div id="値以上のカテゴリ" class="section level3 hasAnchor" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> 3値以上のカテゴリ<a href="#%E5%80%A4%E4%BB%A5%E4%B8%8A%E3%81%AE%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>カテゴリが3値以上の場合はどうだろう？これも、基本的には同じふうに考えることができる。たとえば、最終学歴が中学、高校、短大高専、大学大学院の4つのグループにおいて、賃金の平均がどの程度異なるのかを知りたいとする。</p>
<p><img src="seminar_doc_files/figure-html/unnamed-chunk-193-1.png" width="672" /></p>
<p>中学卒を基準として、高校卒（高校卒 - 中学卒）、短大高専卒（短大高専卒 - 中学卒）、大学大学院卒（大学大学院卒 - 中学卒）だとどれくらい賃金が高いのかを推定することになる。</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="regression_basic.html#cb264-1" tabindex="-1"></a>piaac <span class="ot">&lt;-</span> piaac <span class="sc">%&gt;%</span> </span>
<span id="cb264-2"><a href="regression_basic.html#cb264-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">educ_d2 =</span> <span class="fu">if_else</span>(educ <span class="sc">==</span> <span class="st">&quot;高校&quot;</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb264-3"><a href="regression_basic.html#cb264-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">educ_d3 =</span> <span class="fu">if_else</span>(educ <span class="sc">==</span> <span class="st">&quot;短大高専&quot;</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb264-4"><a href="regression_basic.html#cb264-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">educ_d4 =</span> <span class="fu">if_else</span>(educ <span class="sc">==</span> <span class="st">&quot;大学大学院&quot;</span>, <span class="dv">1</span>, <span class="dv">0</span>)) </span></code></pre></div>
<p>作成した変数を表にまとめると次のようになる。</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>educ_d2</th>
<th>educ_d3</th>
<th>educ_d4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>中学</strong></td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>高校</strong></td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td><strong>短大高専</strong></td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="even">
<td><strong>大学大学院</strong></td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="regression_basic.html#cb265-1" tabindex="-1"></a>reg_res <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> piaac, wage <span class="sc">~</span> educ_d2 <span class="sc">+</span> educ_d3 <span class="sc">+</span> educ_d4)</span>
<span id="cb265-2"><a href="regression_basic.html#cb265-2" tabindex="-1"></a><span class="fu">summary</span>(reg_res)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = wage ~ educ_d2 + educ_d3 + educ_d4, data = piaac)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -1859.1  -690.8  -310.8   387.7  8184.0 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  1431.36      74.90  19.110   &lt;2e-16 ***
## educ_d2       103.99      83.35   1.248    0.212    
## educ_d3       112.34      86.44   1.300    0.194    
## educ_d4       927.69      84.04  11.039   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1126 on 2724 degrees of freedom
## Multiple R-squared:  0.1072, Adjusted R-squared:  0.1062 
## F-statistic:   109 on 3 and 2724 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>それぞれの係数は、基準カテゴリ（今回なら中学卒）と比べて、それぞれ高校、短大高専、大学大学院卒だとどれくらい賃金の平均値が高いのかを表している。標準誤差やp値のみかたについてはどれも同じである。</p>
</div>
<div id="変数がfactorであれば自動でカテゴリとして投入される" class="section level3 hasAnchor" number="7.2.3">
<h3><span class="header-section-number">7.2.3</span> 変数がfactorであれば自動でカテゴリとして投入される<a href="#%E5%A4%89%E6%95%B0%E3%81%8Cfactor%E3%81%A7%E3%81%82%E3%82%8C%E3%81%B0%E8%87%AA%E5%8B%95%E3%81%A7%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E3%81%A8%E3%81%97%E3%81%A6%E6%8A%95%E5%85%A5%E3%81%95%E3%82%8C%E3%82%8B" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>先ほどまでは、0または1の値が入ったダミー変数を自分で作っていた。しかし、必ずしも自分で作る必要はない。独立変数の型がカテゴリの場合には、Rが自動で先ほどのようなダミー変数を勝手に作って投入してくれるからである。</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="regression_basic.html#cb267-1" tabindex="-1"></a>reg_res <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> piaac, wage <span class="sc">~</span> educ)</span>
<span id="cb267-2"><a href="regression_basic.html#cb267-2" tabindex="-1"></a><span class="fu">summary</span>(reg_res)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = wage ~ educ, data = piaac)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -1859.1  -690.8  -310.8   387.7  8184.0 
## 
## Coefficients:
##                Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)     1431.36      74.90  19.110   &lt;2e-16 ***
## educ高校         103.99      83.35   1.248    0.212    
## educ短大高専     112.34      86.44   1.300    0.194    
## educ大学大学院   927.69      84.04  11.039   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1126 on 2724 degrees of freedom
## Multiple R-squared:  0.1072, Adjusted R-squared:  0.1062 
## F-statistic:   109 on 3 and 2724 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>それぞれ、「educ高校」は中学卒と比べて高校卒の平均はいくら高いか、「educ短大高専」は中学卒と比べて短大高専卒の平均はいくら高いか、「educ大学大学院」は中学卒と比べて大学大学院卒の平均はいくら高いか、をそれぞれ表す。</p>
<p>ただし、基準カテゴリは一番最初のものが勝手に選ばれるので、たとえば大学大学院を基準にしてその他を比較したい、と思ったときには、自分でカテゴリの順序を変更しておく必要がある。</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="regression_basic.html#cb269-1" tabindex="-1"></a>piaac <span class="ot">&lt;-</span> piaac <span class="sc">%&gt;%</span> </span>
<span id="cb269-2"><a href="regression_basic.html#cb269-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">educ_reorder =</span> <span class="fu">fct_relevel</span>(educ, <span class="st">&quot;大学大学院&quot;</span>, <span class="st">&quot;短大高専&quot;</span>, <span class="st">&quot;高校&quot;</span>, <span class="st">&quot;中学&quot;</span>)) <span class="co"># fct_relevel関数を使ってカテゴリの順序を大学、短大、高校、中学の順に並び替えた変数を作成</span></span>
<span id="cb269-3"><a href="regression_basic.html#cb269-3" tabindex="-1"></a></span>
<span id="cb269-4"><a href="regression_basic.html#cb269-4" tabindex="-1"></a>reg_res <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> piaac, wage <span class="sc">~</span> educ_reorder)</span>
<span id="cb269-5"><a href="regression_basic.html#cb269-5" tabindex="-1"></a><span class="fu">summary</span>(reg_res)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = wage ~ educ_reorder, data = piaac)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -1859.1  -690.8  -310.8   387.7  8184.0 
## 
## Coefficients:
##                      Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)           2359.06      38.11   61.90   &lt;2e-16 ***
## educ_reorder短大高専  -815.35      57.57  -14.16   &lt;2e-16 ***
## educ_reorder高校      -823.70      52.82  -15.60   &lt;2e-16 ***
## educ_reorder中学      -927.69      84.04  -11.04   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1126 on 2724 degrees of freedom
## Multiple R-squared:  0.1072, Adjusted R-squared:  0.1062 
## F-statistic:   109 on 3 and 2724 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>並び替えた結果、基準カテゴリが「大学大学院」となり、推定結果に表示されていないことがわかる。</p>
</div>
</div>
<div id="regression_basic_binary" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> 従属変数が2値のカテゴリ変数（0/1）の場合<a href="regression_basic.html#regression_basic_binary" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="クロス表と比較しながら結果をみる" class="section level3 hasAnchor" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> クロス表と比較しながら結果をみる<a href="#%E3%82%AF%E3%83%AD%E3%82%B9%E8%A1%A8%E3%81%A8%E6%AF%94%E8%BC%83%E3%81%97%E3%81%AA%E3%81%8C%E3%82%89%E7%B5%90%E6%9E%9C%E3%82%92%E3%81%BF%E3%82%8B" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>たとえば、性別によってこの1年間に職場での訓練（OJTとよぶ）を受ける率が異なっているかどうかを知りたいとする。これも今までと同じように回帰分析の枠組みで扱うことができる。</p>
<p>まず、OJTを受けたならば1、受けていないならば0を取る変数があるとする。これを性別ごとに比較したクロス表を作ってみよう。</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="regression_basic.html#cb271-1" tabindex="-1"></a>piaac <span class="sc">%&gt;%</span> </span>
<span id="cb271-2"><a href="regression_basic.html#cb271-2" tabindex="-1"></a>  <span class="fu">with</span>(<span class="fu">table</span>(gender, ojt)) </span></code></pre></div>
<pre><code>##       ojt
## gender   0   1
##   女性 865 419
##   男性 855 589</code></pre>
<p>クロス表の行割合を見てみよう。</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="regression_basic.html#cb273-1" tabindex="-1"></a>piaac <span class="sc">%&gt;%</span> </span>
<span id="cb273-2"><a href="regression_basic.html#cb273-2" tabindex="-1"></a>  <span class="fu">with</span>(<span class="fu">table</span>(gender, ojt)) <span class="sc">%&gt;%</span> </span>
<span id="cb273-3"><a href="regression_basic.html#cb273-3" tabindex="-1"></a>  <span class="fu">prop.table</span>(<span class="at">margin =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb273-4"><a href="regression_basic.html#cb273-4" tabindex="-1"></a>  <span class="fu">round</span>(<span class="at">digits =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##       ojt
## gender     0     1
##   女性 0.674 0.326
##   男性 0.592 0.408</code></pre>
<p>行割合をみると、女性全体のうちOJTを受けている（Y = 1）割合は0.326（32.6%）であるのに対して、男性全体のうちOJTを受けている（Y = 1）割合は0.408（40.8%）であるということがわかる。</p>
<p>次に、このojtという変数の平均値を計算してみよう。するとどのようになるだろうか？まず、女性について平均値を計算するときの式は次のとおり：</p>
<p><span class="math display">\[
\frac{865 \times 0 + 419 \times 1}{865 + 419} = 0.326
\]</span></p>
<p>同じようにして、男性の平均値は次のように計算できる。</p>
<p><span class="math display">\[
\frac{855 \times 0 + 589 \times 1}{855 + 589} = 0.408
\]</span></p>
<p>これらの値は、上記クロス表の「1」のほうに示されている行割合、すなわち「OJTを受けた人の割合」に一致している。つまり、ある二値変数（0/1）の平均値をとると、その二値変数が1を取る割合（行割合）の値と一致するということである。</p>
<p>このことを図にして表してみよう。</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="regression_basic.html#cb275-1" tabindex="-1"></a>piaac <span class="sc">%&gt;%</span> </span>
<span id="cb275-2"><a href="regression_basic.html#cb275-2" tabindex="-1"></a>  <span class="fu">group_by</span>(gender) <span class="sc">%&gt;%</span> </span>
<span id="cb275-3"><a href="regression_basic.html#cb275-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_ojt =</span> <span class="fu">mean</span>(ojt)) <span class="sc">%&gt;%</span> </span>
<span id="cb275-4"><a href="regression_basic.html#cb275-4" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gender, <span class="at">y =</span> mean_ojt)) <span class="sc">+</span> </span>
<span id="cb275-5"><a href="regression_basic.html#cb275-5" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb275-6"><a href="regression_basic.html#cb275-6" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(mean_ojt, <span class="at">digit =</span> <span class="dv">3</span>)), <span class="at">vjust =</span> <span class="sc">-</span><span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb275-7"><a href="regression_basic.html#cb275-7" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb275-8"><a href="regression_basic.html#cb275-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="seminar_doc_files/figure-html/unnamed-chunk-201-1.png" width="672" /></p>
<p>棒グラフの高さが異なることから分かる通り、男性は女性とくらべてOJTを受けた割合が0.082（8.2%ポイント）<a href="#fn19" class="footnote-ref" id="fnref19"><sup>19</sup></a>高い。</p>
<p>では、ojtを従属変数、性別を独立変数とする回帰式を推定してみよう。</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="regression_basic.html#cb276-1" tabindex="-1"></a>reg_res <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> piaac, ojt <span class="sc">~</span> gender)</span>
<span id="cb276-2"><a href="regression_basic.html#cb276-2" tabindex="-1"></a><span class="fu">summary</span>(reg_res)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = ojt ~ gender, data = piaac)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -0.4079 -0.4079 -0.3263  0.5921  0.6737 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  0.32632    0.01343   24.30  &lt; 2e-16 ***
## gender男性   0.08157    0.01846    4.42 1.03e-05 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.4811 on 2726 degrees of freedom
## Multiple R-squared:  0.007116,   Adjusted R-squared:  0.006751 
## F-statistic: 19.54 on 1 and 2726 DF,  p-value: 1.026e-05</code></pre>
<p>「gender男性」と書かれている行が、女性と比べて男性が何ポイントOJTを受ける割合が高いのかを示している。この値は、ちょうど先ほどの棒グラフの男性と女性の割合（平均値）の差に一致している。つまり、回帰分析の係数は、男性と女性で、平均値（割合）にどの程度差があるのかを示しているのである。これは、これまでの連続変数を従属変数とするときの回帰分析と同じである。</p>
<p>係数の見方（プラスであると多い、マイナスであると少ない）も、標準誤差も、p値も、その解釈はすべて今までの回帰分析と同じとなる。</p>
</div>
<div id="散布図と比較しながら結果をみる" class="section level3 hasAnchor" number="7.3.2">
<h3><span class="header-section-number">7.3.2</span> 散布図と比較しながら結果をみる<a href="#%E6%95%A3%E5%B8%83%E5%9B%B3%E3%81%A8%E6%AF%94%E8%BC%83%E3%81%97%E3%81%AA%E3%81%8C%E3%82%89%E7%B5%90%E6%9E%9C%E3%82%92%E3%81%BF%E3%82%8B" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>もちろん、年齢などの連続変数を独立変数（X）として使うこともできる。たとえば、横軸に年齢、縦軸にOJTをとった散布図を考えてみよう。ここでは重なっているほど点が大きくなるように調整している。</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="regression_basic.html#cb278-1" tabindex="-1"></a>piaac <span class="sc">%&gt;%</span> </span>
<span id="cb278-2"><a href="regression_basic.html#cb278-2" tabindex="-1"></a>  <span class="fu">group_by</span>(age, ojt) <span class="sc">%&gt;%</span> </span>
<span id="cb278-3"><a href="regression_basic.html#cb278-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb278-4"><a href="regression_basic.html#cb278-4" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> ojt)) <span class="sc">+</span> </span>
<span id="cb278-5"><a href="regression_basic.html#cb278-5" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> n), <span class="at">shape =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb278-6"><a href="regression_basic.html#cb278-6" tabindex="-1"></a>  <span class="fu">scale_size</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">10</span>)) <span class="sc">+</span> </span>
<span id="cb278-7"><a href="regression_basic.html#cb278-7" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">weight =</span> n), <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb278-8"><a href="regression_basic.html#cb278-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;age&#39;. You can
## override using the `.groups` argument.
## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="seminar_doc_files/figure-html/unnamed-chunk-204-1.png" width="672" /></p>
<p>縦軸のOJTは0または1しかとらないので、点はy = 1またはy = 0の位置のどちらかに描かれる。推定される回帰式は、この散布図全体の傾向を要約するような線として表される。実際に、回帰式を推定してみよう。</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="regression_basic.html#cb280-1" tabindex="-1"></a>reg_res <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> piaac, ojt <span class="sc">~</span> age)</span>
<span id="cb280-2"><a href="regression_basic.html#cb280-2" tabindex="-1"></a><span class="fu">summary</span>(reg_res)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = ojt ~ age, data = piaac)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -0.4416 -0.3842 -0.3230  0.6043  0.7076 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  0.5372265  0.0383580  14.006  &lt; 2e-16 ***
## age         -0.0038253  0.0008492  -4.504 6.94e-06 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.4811 on 2726 degrees of freedom
## Multiple R-squared:  0.007388,   Adjusted R-squared:  0.007024 
## F-statistic: 20.29 on 1 and 2726 DF,  p-value: 6.936e-06</code></pre>
<p>年齢（age）の係数はマイナスであり、年齢が1歳高いと、OJTを受けている割合が0.004ポイント（0.4 %ポイント）低いということがわかる。</p>
</div>
<div id="注意点" class="section level3 hasAnchor" number="7.3.3">
<h3><span class="header-section-number">7.3.3</span> 注意点<a href="#%E6%B3%A8%E6%84%8F%E7%82%B9" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>分析に先立ち、従属変数とする2値のカテゴリ変数のどちらを1とし、どちらを0とするかは自分であらかじめ決めておいて、数値型に変換しておく必要がある（カテゴリ変数のままでは分析できない）。</p>
<p>なお、従属変数が2値のカテゴリ変数の場合にはロジスティック回帰分析（ロジットモデル）やプロビットモデルといった方法がよく使われる。これについては<a href="logit.html#logit">ロジスティック回帰分析</a>の章で解説する。ただし、今紹介した（ふつうの）回帰分析と比べるとやや解釈が難しい。また上記の（ふつうの）回帰分析を使っても、たいていの場合はそんなに結論が変わるわけではないので、学部レベルではこれで十分である。もちろん、関心のある人は積極的にチャレンジしてみるとよいだろう。</p>
</div>
</div>
<div id="regression_basic_log" class="section level2 hasAnchor" number="7.4">
<h2><span class="header-section-number">7.4</span> 非線形の関連：対数変換<a href="regression_basic.html#regression_basic_log" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="対数変換とは" class="section level3 hasAnchor" number="7.4.1">
<h3><span class="header-section-number">7.4.1</span> 対数変換とは<a href="#%E5%AF%BE%E6%95%B0%E5%A4%89%E6%8F%9B%E3%81%A8%E3%81%AF" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>用いる変数が正規分布から乖離しているときや、変数の単位に依存せず効果の大きさを測定したいとき、あるいは、比率（%）でみた変化に関心がある場合には、変数を対数変換することを検討するとよい。具体的には、次のような場面である：</p>
<ul>
<li>高卒と比べて大卒であると、（実額ではなく）何%くらい賃金が高いのかを知りたい。</li>
<li>女性が男性と比べて何%賃金が低いのかを、通貨単位が異なる国（たとえば、日本と韓国）でそれぞれ調べて、どちらのほうがどれくらい男女の賃金格差が大きいのかを知りたい。</li>
</ul>
<p>社会科学系では、底がeの対数（自然対数）を取ることで変数を対数変換することが多い。Rでは<code>log()</code>という関数で自然対数変換ができる。次のようにして、賃金を対数変換した変数を作ることができる。</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="regression_basic.html#cb282-1" tabindex="-1"></a>piaac <span class="ot">&lt;-</span> piaac <span class="sc">%&gt;%</span> </span>
<span id="cb282-2"><a href="regression_basic.html#cb282-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">logwage =</span> <span class="fu">log</span>(wage))</span></code></pre></div>
<p>2つの変数の分布を比較してみよう。</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="regression_basic.html#cb283-1" tabindex="-1"></a>piaac <span class="sc">%&gt;%</span> </span>
<span id="cb283-2"><a href="regression_basic.html#cb283-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> wage)) <span class="sc">+</span> </span>
<span id="cb283-3"><a href="regression_basic.html#cb283-3" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value
## with `binwidth`.</code></pre>
<p><img src="seminar_doc_files/figure-html/unnamed-chunk-208-1.png" width="672" /></p>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="regression_basic.html#cb285-1" tabindex="-1"></a>piaac <span class="sc">%&gt;%</span> </span>
<span id="cb285-2"><a href="regression_basic.html#cb285-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> logwage)) <span class="sc">+</span> </span>
<span id="cb285-3"><a href="regression_basic.html#cb285-3" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value
## with `binwidth`.</code></pre>
<p><img src="seminar_doc_files/figure-html/unnamed-chunk-208-2.png" width="672" /></p>
<p>対数変換した後の変数は、対数変換する前の変数よりも正規分布に近づいていることがわかる。</p>
</div>
<div id="自然対数と対数関数について" class="section level3 hasAnchor" number="7.4.2">
<h3><span class="header-section-number">7.4.2</span> 自然対数と対数関数について<a href="#%E8%87%AA%E7%84%B6%E5%AF%BE%E6%95%B0%E3%81%A8%E5%AF%BE%E6%95%B0%E9%96%A2%E6%95%B0%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><span class="math display">\[
e = \lim_{t\rightarrow0}(1 + t)^{\frac{1}{t}} \simeq 2.7182818\cdots
\]</span> で定義される数のことを<strong>ネイピア数</strong>といい、<span class="math inline">\(e\)</span>と書く（円周率<span class="math inline">\(\pi\)</span>みたいな感じ）。慣習上、ネイピア数<span class="math inline">\(e\)</span>を底とする指数<span class="math inline">\(e^x\)</span>を<span class="math inline">\(\exp(x)\)</span>と表記したりする。以下では、<span class="math inline">\(e^x\)</span>のことを<span class="math inline">\(\exp(x)\)</span>と書くことにする。</p>
<p><span class="math inline">\(\log_a x\)</span>のように表される関数を<strong>対数関数</strong>といい、次のように定義される：</p>
<p><span class="math display">\[
a^y = x \leftrightarrow y = \log_a x
\]</span></p>
<p>とくに底が<span class="math inline">\(e\)</span>の場合を<strong>自然対数</strong>という。社会科学系の文脈ではこのときには底を省略して、<span class="math inline">\(e^y = x \leftrightarrow y = \log(x)\)</span>というふうに書かれることが多い。</p>
</div>
<div id="対数を使った場合の回帰分析" class="section level3 hasAnchor" number="7.4.3">
<h3><span class="header-section-number">7.4.3</span> 対数を使った場合の回帰分析<a href="#%E5%AF%BE%E6%95%B0%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E5%A0%B4%E5%90%88%E3%81%AE%E5%9B%9E%E5%B8%B0%E5%88%86%E6%9E%90" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>先にみたように、数的思考力スコアと対数賃金の散布図を書くと、次のようになる。</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="regression_basic.html#cb287-1" tabindex="-1"></a>piaac <span class="sc">%&gt;%</span> </span>
<span id="cb287-2"><a href="regression_basic.html#cb287-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> numeracy, <span class="at">y =</span> logwage)) <span class="sc">+</span> </span>
<span id="cb287-3"><a href="regression_basic.html#cb287-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb287-4"><a href="regression_basic.html#cb287-4" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="seminar_doc_files/figure-html/unnamed-chunk-209-1.png" width="672" /></p>
<p>対数変換した後の賃金を従属変数として、回帰分析を推定してみよう。</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="regression_basic.html#cb289-1" tabindex="-1"></a>reg_res <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> piaac, logwage <span class="sc">~</span> numeracy)</span>
<span id="cb289-2"><a href="regression_basic.html#cb289-2" tabindex="-1"></a><span class="fu">summary</span>(reg_res)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = logwage ~ numeracy, data = piaac)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -1.31652 -0.39318 -0.05807  0.33222  2.14472 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 6.0351509  0.0688414   87.67   &lt;2e-16 ***
## numeracy    0.0043809  0.0002311   18.95   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.518 on 2726 degrees of freedom
## Multiple R-squared:  0.1164, Adjusted R-squared:  0.1161 
## F-statistic: 359.3 on 1 and 2726 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>なお、対数変換した変数を新たに作成しなくても、次のように書くことで、回帰分析のコード中で対数変換を行う事ができる。以下でも同じ結果を得ることができる（結果は省略）。</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="regression_basic.html#cb291-1" tabindex="-1"></a><span class="fu">lm</span>(<span class="at">data =</span> piaac, <span class="fu">log</span>(wage) <span class="sc">~</span> numeracy)</span></code></pre></div>
<p>numeracyの係数は、数的思考力スコアが1ポイント高いと、対数賃金が0.004ポイント高いということを意味する。</p>
</div>
<div id="従属変数の対数を取ったときの結果の解釈" class="section level3 hasAnchor" number="7.4.4">
<h3><span class="header-section-number">7.4.4</span> 従属変数の対数を取ったときの結果の解釈<a href="#%E5%BE%93%E5%B1%9E%E5%A4%89%E6%95%B0%E3%81%AE%E5%AF%BE%E6%95%B0%E3%82%92%E5%8F%96%E3%81%A3%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%AE%E7%B5%90%E6%9E%9C%E3%81%AE%E8%A7%A3%E9%87%88" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>対数賃金がxxxポイントだけ高いというのは、実質的にはどのような意味なのだろうか？</p>
<p>まず、一般的な以下のような単回帰分析について考える。</p>
<p><span class="math display">\[
y = \beta_0 + \beta_1x
\]</span></p>
<p>このとき、<span class="math inline">\(x\)</span>が1単位増えたとき（<span class="math inline">\(\Delta x = 1\)</span>）の<span class="math inline">\(y\)</span>の変化分を<span class="math inline">\(\Delta y\)</span>とすると、先の式は次のようになる。</p>
<p><span class="math display">\[
\begin{align}
y + \Delta y &amp;= \beta_0 + \beta_1 (x + 1) \\
y + \Delta y &amp;= (\beta_0 + \beta_1 x) + \beta_1 \\
\Delta y &amp;= \beta_1 \\
\end{align}
\]</span></p>
<p>このとき、<span class="math inline">\(\Delta y = \beta_1\)</span>となる。すなわち、<span class="math inline">\(x\)</span>が1単位増えたときには、<span class="math inline">\(y\)</span>が<span class="math inline">\(\beta_1\)</span>だけ変化する、ということを表している。</p>
<p>では、次のような式のときはどうだろうか？</p>
<p><span class="math display">\[
\log(y) = \beta_0 + \beta_1x
\]</span></p>
<p>同じように、<span class="math inline">\(x\)</span>が1単位増えたとき（<span class="math inline">\(\Delta x = 1\)</span>）の<span class="math inline">\(y\)</span>の変化分を<span class="math inline">\(\Delta y\)</span>と表すことにする。すると、</p>
<p><span class="math display">\[
\begin{aligned}
\log(y + \Delta y)
&amp;= \beta_0 + \beta_1(x + 1) \\
y + \Delta y &amp;= \exp(\beta_0 + \beta_1(x + 1)) \\
y + \Delta y &amp;= \exp(\beta_1)\exp(\beta_0 + \beta_1x) \\
y + \Delta y &amp;= \exp(\beta_1)y
\end{aligned}
\]</span></p>
<p>となり、<span class="math inline">\(x\)</span>が1単位増えたときに<span class="math inline">\(y\)</span>は<span class="math inline">\(\exp(\beta_1)\)</span>倍になる、ということがわかる。いくつか実際の値を計算してみると、次のようになる。なお、<span class="math inline">\(\simeq\)</span>は「ほぼ等しい」ということを意味する記号である。</p>
<p><span class="math display">\[
\begin{align}
\beta_1 &amp;= 0.1 \leftrightarrow \exp(\beta_1) \simeq 1.105 \\
\beta_1 &amp;= 0 \leftrightarrow \exp(\beta_1)  \simeq 1 \\
\beta_1 &amp;= -0.1 \leftrightarrow \exp(\beta_1) \simeq 0.905 \\
\end{align}
\]</span></p>
<p><span class="math inline">\(\exp(\beta_1)\)</span>が1単位増えたときに<span class="math inline">\(y\)</span>が<span class="math inline">\(\exp(\beta_1)\)</span>倍になる、ということを表す。すなわち、<span class="math inline">\(\beta_1\)</span>の値が小さい場合には、対数変換した従属変数の係数は、独立変数が1単位増えたときに従属変数が何倍になるかを表す。</p>
<p>なお、<span class="math inline">\(\beta_1\)</span>の値がある程度小さい場合には、<span class="math inline">\(\beta_1\)</span>と<span class="math inline">\(\exp(\beta_1) - 1\)</span>（または、<span class="math inline">\(\beta_1 + 1\)</span>と<span class="math inline">\(\exp(\beta_1)\)</span>）はかなり近い値になる。ただし、<span class="math inline">\(\beta_1\)</span>が大きくなるほど両者のずれは大きくなる。これを図示したのが以下の図である。</p>
<p><img src="seminar_doc_files/figure-html/unnamed-chunk-213-1.png" width="672" /></p>
<p>横軸は<span class="math inline">\(\beta\)</span>の値を、縦軸にはそれぞれ<span class="math inline">\(y = \beta\)</span>または<span class="math inline">\(y = \exp(\beta) - 1\)</span>のときの<span class="math inline">\(y\)</span>の値をそれぞれ示している。この図からもわかるように、<span class="math inline">\(\beta\)</span>の絶対値が小さい（たとえば、-0.1〜+0.1）場合には、この2つの線はほとんど重なっている。一方で、<span class="math inline">\(\beta\)</span>の値が大きくなっていくと、両者の<span class="math inline">\(y\)</span>の値は徐々に隔たっていくことがわかる。たとえば<span class="math inline">\(\beta = 0.4\)</span>のときには、<span class="math inline">\(y = \exp(0.4) - 1 = 0.49\)</span>である。また、<span class="math inline">\(\beta = -0.4\)</span>のときには、<span class="math inline">\(y = \exp(-0.4) - 1 = -0.33\)</span>である。したがって、対数変換した変数を従属変数とした回帰分析を用いる場合には、値の指数を計算するのが望ましい。</p>
<p>実例を確認しよう。例えば次のように対数賃金を従属変数、性別を独立変数とする回帰分析を推定する。</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="regression_basic.html#cb292-1" tabindex="-1"></a>reg_res <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> piaac, logwage <span class="sc">~</span> gender)</span>
<span id="cb292-2"><a href="regression_basic.html#cb292-2" tabindex="-1"></a></span>
<span id="cb292-3"><a href="regression_basic.html#cb292-3" tabindex="-1"></a><span class="fu">summary</span>(reg_res)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = logwage ~ gender, data = piaac)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -1.40835 -0.35529 -0.07757  0.32873  1.90992 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  7.08073    0.01395   507.5   &lt;2e-16 ***
## gender男性   0.46412    0.01918    24.2   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.5 on 2726 degrees of freedom
## Multiple R-squared:  0.1769, Adjusted R-squared:  0.1766 
## F-statistic: 585.7 on 1 and 2726 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>gender男性の係数の値は0.464である。この係数が実際にどれくらいの違いを表しているかを計算するときには、次のようにする：</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="regression_basic.html#cb294-1" tabindex="-1"></a><span class="fu">exp</span>(<span class="fl">0.46412</span>)</span></code></pre></div>
<pre><code>## [1] 1.590614</code></pre>
<p>すなわち、男性であると、女性と比べて賃金が1.59倍高い = 男性は女性と比べて賃金が59%高い、ということを表す。</p>
</div>
<div id="従属変数または独立変数を対数変換したときの解釈" class="section level3 hasAnchor" number="7.4.5">
<h3><span class="header-section-number">7.4.5</span> 従属変数または独立変数を対数変換したときの解釈<a href="#%E5%BE%93%E5%B1%9E%E5%A4%89%E6%95%B0%E3%81%BE%E3%81%9F%E3%81%AF%E7%8B%AC%E7%AB%8B%E5%A4%89%E6%95%B0%E3%82%92%E5%AF%BE%E6%95%B0%E5%A4%89%E6%8F%9B%E3%81%97%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%AE%E8%A7%A3%E9%87%88" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>従属変数だけではなく、独立変数についても対数を取ることができる。<span class="math inline">\(\beta_1\)</span>がある程度小さい場合、それぞれ解釈は次のようになる：</p>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>モデル</th>
<th>解釈</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(y = \beta_0 + \beta_1x\)</span></td>
<td><span class="math inline">\(x\)</span>が1単位増えると、<span class="math inline">\(y\)</span>が<span class="math inline">\(\beta_1\)</span>増える</td>
</tr>
<tr class="even">
<td><span class="math inline">\(\log(y) = \beta_0 + \beta_1x\)</span></td>
<td><span class="math inline">\(x\)</span>が1単位増えると、<span class="math inline">\(y\)</span>が<span class="math inline">\(100 \times \beta_1\)</span>%増える</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(y = \beta_0 + \beta_1\log(x)\)</span></td>
<td><span class="math inline">\(x\)</span>が1%増えると、<span class="math inline">\(y\)</span>が<span class="math inline">\(\beta_1 / 100\)</span>増える</td>
</tr>
<tr class="even">
<td><span class="math inline">\(\log(y) = \beta_0 + \beta_1\log(x)\)</span></td>
<td><span class="math inline">\(x\)</span>が1%増えると、<span class="math inline">\(y\)</span>が<span class="math inline">\(\beta_1\)</span>%増える</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="regression_basic_quadratic" class="section level2 hasAnchor" number="7.5">
<h2><span class="header-section-number">7.5</span> 非線形の関連：二次曲線型<a href="regression_basic.html#regression_basic_quadratic" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="二次曲線とは" class="section level3 hasAnchor" number="7.5.1">
<h3><span class="header-section-number">7.5.1</span> 二次曲線とは<a href="#%E4%BA%8C%E6%AC%A1%E6%9B%B2%E7%B7%9A%E3%81%A8%E3%81%AF" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>年齢と賃金がどのような関係にあるかを改めて考え直してみよう。年齢と賃金の関係は、たんに年齢が上がると賃金が上がるという線形の関連ではなく、年齢が上がるほど賃金の上昇が緩やかになっていって、ある程度年齢が上がると関係が反転する（負の関係になる）ということが考えられる。このような場合には、次のように二次曲線（二次関数）を使うことで、こうした関係をうまく表現できる。</p>
<p><span class="math display">\[
y = \beta_0 + \beta_1x + \beta_2x^2
\]</span></p>
<p>このような場合、<span class="math inline">\(x\)</span>が1単位増えたときの<span class="math inline">\(y\)</span>の増加量は、もともとの<span class="math inline">\(x\)</span>の値によって異なる。<span class="math inline">\(x\)</span>が1単位増えたときの<span class="math inline">\(y\)</span>の変化分を<span class="math inline">\(\Delta y\)</span>と表すとすると、</p>
<p><span class="math display">\[
\begin{align}
y + \Delta y &amp;= \beta_0 + \beta_1(x + 1) + \beta_2 (x + 1)^2 \\
&amp;= (\beta_0 + \beta_1x + \beta_2x^2) + \beta_1 + (2x + 1)\beta_2 \\
\Delta y &amp;= \beta_1 + (2x + 1)\beta_2
\end{align}
\]</span></p>
<p>となる。すなわち、<span class="math inline">\(x\)</span>が1単位増えたときの<span class="math inline">\(y\)</span>の増加量は、もともとの<span class="math inline">\(x\)</span>の値によって異なるということになる。回帰式の形状や結果の読み方は次のようになる：</p>
<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th><span class="math inline">\(\beta_2\)</span>の係数</th>
<th>解釈</th>
<th>形状</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(\beta_2 &lt; 0\)</span></td>
<td>xが大きいほど、x1単位の増加に対するyの増加量は小さい</td>
<td><span class="math inline">\(-\beta_1/2\beta_2\)</span>を底とする、上に凸な2次関数</td>
</tr>
<tr class="even">
<td><span class="math inline">\(\beta_2 &gt; 0\)</span></td>
<td>xが大きいほど、x1単位の増加に対するyの増加量は大きい</td>
<td><span class="math inline">\(-\beta_1/2\beta_2\)</span>を底とする、下に凸な2次関数</td>
</tr>
</tbody>
</table>
</div>
<div id="変数の作成と結果の解釈" class="section level3 hasAnchor" number="7.5.2">
<h3><span class="header-section-number">7.5.2</span> 変数の作成と結果の解釈<a href="#%E5%A4%89%E6%95%B0%E3%81%AE%E4%BD%9C%E6%88%90%E3%81%A8%E7%B5%90%E6%9E%9C%E3%81%AE%E8%A7%A3%E9%87%88" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>年齢を2乗した変数は次のように作成できる。</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="regression_basic.html#cb296-1" tabindex="-1"></a>piaac <span class="ot">&lt;-</span> piaac <span class="sc">%&gt;%</span> </span>
<span id="cb296-2"><a href="regression_basic.html#cb296-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_sq =</span> age<span class="sc">^</span><span class="dv">2</span>)</span></code></pre></div>
<p>回帰分析を行ってみる：</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="regression_basic.html#cb297-1" tabindex="-1"></a>reg_res <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> piaac, logwage <span class="sc">~</span> age <span class="sc">+</span> age_sq)</span>
<span id="cb297-2"><a href="regression_basic.html#cb297-2" tabindex="-1"></a><span class="fu">summary</span>(reg_res)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = logwage ~ age + age_sq, data = piaac)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -1.28557 -0.44715 -0.03263  0.36524  1.95383 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  5.636e+00  1.762e-01   31.98   &lt;2e-16 ***
## age          7.609e-02  8.226e-03    9.25   &lt;2e-16 ***
## age_sq      -8.064e-04  9.185e-05   -8.78   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.5415 on 2725 degrees of freedom
## Multiple R-squared:  0.03465,    Adjusted R-squared:  0.03394 
## F-statistic: 48.91 on 2 and 2725 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>二次曲線の場合、個々の係数だけではあまり解釈ができない。そこで、散布図と回帰直線（曲線）をみてみよう：</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="regression_basic.html#cb299-1" tabindex="-1"></a>piaac <span class="sc">%&gt;%</span> </span>
<span id="cb299-2"><a href="regression_basic.html#cb299-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> logwage)) <span class="sc">+</span> </span>
<span id="cb299-3"><a href="regression_basic.html#cb299-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb299-4"><a href="regression_basic.html#cb299-4" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">formula =</span> y <span class="sc">~</span> <span class="fu">poly</span>(x, <span class="dv">2</span>), <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="co"># 2次曲線を描く場合にはformula = y ~ poly(x, 2)というオプションを追加。</span></span></code></pre></div>
<p><img src="seminar_doc_files/figure-html/unnamed-chunk-219-1.png" width="672" /></p>
<p>このように、若いときには年齢による賃金の上昇は大きいけれども、その上昇幅は年齢が高くなるほど小さくなり、高い年齢ではむしろ負に転ずることがわかる。年齢についてはこのように二次曲線をつかうことはしばしば有効である。</p>
<p>なお2乗した変数を別に作らなくても、回帰分析のコード中で2乗した変数を作成することができる。（結果は省略）次のように<code>I()</code>という表記を用いて、<code>()</code>内で行いたい計算方法を指定する。</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="regression_basic.html#cb300-1" tabindex="-1"></a><span class="fu">lm</span>(<span class="at">data =</span> piaac, <span class="fu">log</span>(wage) <span class="sc">~</span> age <span class="sc">+</span> <span class="fu">I</span>(age<span class="sc">^</span><span class="dv">2</span>))</span></code></pre></div>
</div>
<div id="モデル選択とf検定" class="section level3 hasAnchor" number="7.5.3">
<h3><span class="header-section-number">7.5.3</span> モデル選択とF検定<a href="#%E3%83%A2%E3%83%87%E3%83%AB%E9%81%B8%E6%8A%9E%E3%81%A8f%E6%A4%9C%E5%AE%9A" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>連続変数を独立変数として用いる場合には、その関連が線形ではなく、このように非線形である可能性についても考えることが望ましい。二次曲線を使うかどうかは、次の2点から決める。</p>
<ul>
<li>理論的に、あるいはこれまで知られている経験的な傾向に照らして妥当かどうか。日本の場合、初めて働き始めた時期の賃金は低く、高い職位へと昇進していったり、キャリアアップのための転職も起こりやすい。そのため、賃金は大きく上昇していく。他方、高い年齢になってくると昇進は落ち着くため、賃金の上昇率は小さくなっていくだろう。さらに60歳のときには定年があり、定年を期に嘱託社員などに転換することによって、賃金が減少することもあるだろう。したがって、年齢と賃金の関係は山なりの二次曲線型になると考えられる。実際、<a href="https://www.mhlw.go.jp/toukei/list/chinginkouzou.html">賃金構造基本統計調査</a>などの公的統計でも、年齢と賃金の関係がこうした山なりの二次曲線型になっていることが確認できる。</li>
<li>実際のデータへの当てはまりが良いかどうか。たとえばF検定を用いて線形のモデルと二次曲線のモデルのどちらがよりデータに当てはまるかを比較する。もし二次曲線のモデルのほうが当てはまりが良いと判断できるならば、二次曲線を使うとよい。</li>
</ul>
<p>上記の2つめ、すなわち実際のデータへの当てはまりが良いかどうかを確認するためには、線形モデルと二次曲線モデルを比較するのが有用である。その方法の一つが、F検定である。F検定では、入れ子になっている（どちらかのモデルからある変数を抜くと、もう一方のモデルと一致するということを意味する）2つのモデルを比較して、より多くの独立変数を含めたモデルがより少ない独立変数からなるモデルよりもよりよくデータに当てはまっているといえるかどうかをテストすることができる。<code>anova()</code>という関数を用いる。具体的には、次のようにする。</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="regression_basic.html#cb301-1" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> piaac, logwage <span class="sc">~</span> age) <span class="co"># 線形モデルを推定</span></span>
<span id="cb301-2"><a href="regression_basic.html#cb301-2" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> piaac, logwage <span class="sc">~</span> age <span class="sc">+</span> <span class="fu">I</span>(age<span class="sc">^</span><span class="dv">2</span>)) <span class="co"># 二次曲線モデルを推定</span></span>
<span id="cb301-3"><a href="regression_basic.html#cb301-3" tabindex="-1"></a><span class="fu">anova</span>(model1, model2)</span></code></pre></div>
<pre><code>## Analysis of Variance Table
## 
## Model 1: logwage ~ age
## Model 2: logwage ~ age + I(age^2)
##   Res.Df    RSS Df Sum of Sq      F    Pr(&gt;F)    
## 1   2726 821.73                                  
## 2   2725 799.12  1    22.608 77.094 &lt; 2.2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>出力結果の2行目がF検定の結果である。このように2つの回帰式を比較するときのF検定では、一方のモデルを当てはめた場合の残差平方和（Residual Sum of Squares, RSS）と、もう一方のモデルを当てはめた場合の残差平方和が異なるといえるか、ということを検定する。もし異なると言えるならば、変数を追加したことでより残差の小さい = データへの当てはまりのよいモデルを得られたということを意味する。具体的には<code>Pr(&gt;F)</code>の値を見ればよく、この値が十分に小さい（たとえば0.05よりも小さい）ならば、独立変数の数が多い方のモデル（今回の場合は二次曲線モデル）のほうが統計的に有意に残差平方和が小さく、したがってよりデータへの当てはまりがよいといえる。</p>
</div>
</div>
<div id="regression_modelsummary" class="section level2 hasAnchor" number="7.6">
<h2><span class="header-section-number">7.6</span> 回帰分析の結果をきれいに表示する<a href="regression_basic.html#regression_modelsummary" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>先ほどの回帰分析の結果をもう少しきれいに表示したいと思うかもしれない。このようなときに活躍するのが<code>modelsummary</code>パッケージである。</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="regression_basic.html#cb303-1" tabindex="-1"></a><span class="fu">library</span>(modelsummary)</span></code></pre></div>
<p>なお、<code>modelsummary</code> パッケージをインストールする（または読み込む）際、<code>pandoc</code> というパッケージを併せてインストールするよう要求されるかもしれない。この場合は、いわれたとおりに<code>install.packages("pandoc")</code>を実行しよう。</p>
<p>では、実際に使ってみよう。<code>modelsummary(list(model))</code>（modelという部分には、すでに保存しておいた回帰分析の結果を入れる）というのが最低限のコマンド。</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="regression_basic.html#cb304-1" tabindex="-1"></a>reg_res <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> piaac, <span class="fu">log</span>(wage) <span class="sc">~</span> age)</span>
<span id="cb304-2"><a href="regression_basic.html#cb304-2" tabindex="-1"></a></span>
<span id="cb304-3"><a href="regression_basic.html#cb304-3" tabindex="-1"></a><span class="fu">modelsummary</span>(<span class="fu">list</span>(reg_res)) </span></code></pre></div>
<!-- preamble start -->

    <script>

      function styleCell_9y0mkp8nvcugg3212gt8(i, j, css_id) {
          var table = document.getElementById("tinytable_9y0mkp8nvcugg3212gt8");
          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_9y0mkp8nvcugg3212gt8');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_9y0mkp8nvcugg3212gt8(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_9y0mkp8nvcugg3212gt8");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: 12, j: 1 },  ], css_id: 'tinytable_css_64lrfmi4r0p6lryjtx4e',}, 
          { positions: [ { i: 4, j: 1 },  ], css_id: 'tinytable_css_fj1ggnttj49fdeub1kxg',}, 
          { positions: [ { i: 1, j: 1 }, { i: 2, j: 1 }, { i: 3, j: 1 }, { i: 8, j: 1 }, { i: 5, j: 1 }, { i: 6, j: 1 }, { i: 7, j: 1 }, { i: 9, j: 1 }, { i: 10, j: 1 }, { i: 11, j: 1 },  ], css_id: 'tinytable_css_ix4pjaefm100zj1eu47s',}, 
          { positions: [ { i: 0, j: 1 },  ], css_id: 'tinytable_css_h6e9dmz6v4orwasziksw',}, 
          { positions: [ { i: 12, j: 0 },  ], css_id: 'tinytable_css_vaf4nk8i6wds2zeyb28a',}, 
          { positions: [ { i: 4, j: 0 },  ], css_id: 'tinytable_css_qg7mxa6q6exq0uk7dzse',}, 
          { positions: [ { i: 1, j: 0 }, { i: 2, j: 0 }, { i: 3, j: 0 }, { i: 8, j: 0 }, { i: 5, j: 0 }, { i: 6, j: 0 }, { i: 7, j: 0 }, { i: 9, j: 0 }, { i: 10, j: 0 }, { i: 11, j: 0 },  ], css_id: 'tinytable_css_3pa15q4722t1mhdr0za6',}, 
          { positions: [ { i: 0, j: 0 },  ], css_id: 'tinytable_css_yw8sbyqzqnqrfqtwckhc',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_9y0mkp8nvcugg3212gt8(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_64lrfmi4r0p6lryjtx4e, .table th.tinytable_css_64lrfmi4r0p6lryjtx4e { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_fj1ggnttj49fdeub1kxg, .table th.tinytable_css_fj1ggnttj49fdeub1kxg { text-align: center; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_ix4pjaefm100zj1eu47s, .table th.tinytable_css_ix4pjaefm100zj1eu47s { text-align: center; }
      .table td.tinytable_css_h6e9dmz6v4orwasziksw, .table th.tinytable_css_h6e9dmz6v4orwasziksw { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_vaf4nk8i6wds2zeyb28a, .table th.tinytable_css_vaf4nk8i6wds2zeyb28a { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_qg7mxa6q6exq0uk7dzse, .table th.tinytable_css_qg7mxa6q6exq0uk7dzse { text-align: left; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_3pa15q4722t1mhdr0za6, .table th.tinytable_css_3pa15q4722t1mhdr0za6 { text-align: left; }
      .table td.tinytable_css_yw8sbyqzqnqrfqtwckhc, .table th.tinytable_css_yw8sbyqzqnqrfqtwckhc { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_9y0mkp8nvcugg3212gt8" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing='true'>
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">(1)</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>(Intercept)</td>
                  <td>7.136</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.044)</td>
                </tr>
                <tr>
                  <td>age</td>
                  <td>0.004</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.001)</td>
                </tr>
                <tr>
                  <td>Num.Obs.</td>
                  <td>2728</td>
                </tr>
                <tr>
                  <td>R2</td>
                  <td>0.007</td>
                </tr>
                <tr>
                  <td>R2 Adj.</td>
                  <td>0.007</td>
                </tr>
                <tr>
                  <td>AIC</td>
                  <td>44447.2</td>
                </tr>
                <tr>
                  <td>BIC</td>
                  <td>44464.9</td>
                </tr>
                <tr>
                  <td>Log.Lik.</td>
                  <td>-2234.183</td>
                </tr>
                <tr>
                  <td>F</td>
                  <td>20.156</td>
                </tr>
                <tr>
                  <td>RMSE</td>
                  <td>0.55</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
<p>よく論文でみる感じのきれいな見た目になる。とはいえ、まだたとえば変数名が何を指しているかなどは改善の余地がある。オプションを色々指定することで、よりわかりやすい表が作れる。</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="regression_basic.html#cb305-1" tabindex="-1"></a><span class="fu">modelsummary</span>(<span class="fu">list</span>(reg_res),</span>
<span id="cb305-2"><a href="regression_basic.html#cb305-2" tabindex="-1"></a>         <span class="at">stars =</span> <span class="cn">TRUE</span>, <span class="co"># 有意水準を示す印をつける</span></span>
<span id="cb305-3"><a href="regression_basic.html#cb305-3" tabindex="-1"></a>         <span class="at">coef_map =</span> <span class="fu">c</span>(<span class="st">&quot;(Intercept)&quot;</span> <span class="ot">=</span> <span class="st">&quot;切片&quot;</span>,</span>
<span id="cb305-4"><a href="regression_basic.html#cb305-4" tabindex="-1"></a>                         <span class="st">&quot;age&quot;</span> <span class="ot">=</span> <span class="st">&quot;年齢&quot;</span>), <span class="co"># 各変数に名前をつける</span></span>
<span id="cb305-5"><a href="regression_basic.html#cb305-5" tabindex="-1"></a>         <span class="at">gof_map =</span> <span class="fu">c</span>(<span class="st">&quot;nobs&quot;</span>, <span class="st">&quot;r.squared&quot;</span>) <span class="co"># サンプルサイズと決定係数のみ記載する</span></span>
<span id="cb305-6"><a href="regression_basic.html#cb305-6" tabindex="-1"></a>)</span></code></pre></div>
<!-- preamble start -->

    <script>

      function styleCell_t01dzq4ydfz6ixwi0s8j(i, j, css_id) {
          var table = document.getElementById("tinytable_t01dzq4ydfz6ixwi0s8j");
          var cell = table.rows[i]?.cells[j];  // Safe navigation to avoid errors
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_t01dzq4ydfz6ixwi0s8j');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_t01dzq4ydfz6ixwi0s8j(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_t01dzq4ydfz6ixwi0s8j");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: 6, j: 1 },  ], css_id: 'tinytable_css_1g5e7ud9dvck60yw7das',}, 
          { positions: [ { i: 4, j: 1 },  ], css_id: 'tinytable_css_atudhx2pi1wrup2ddz40',}, 
          { positions: [ { i: 1, j: 1 }, { i: 2, j: 1 }, { i: 3, j: 1 }, { i: 5, j: 1 },  ], css_id: 'tinytable_css_ufm9qna3kfwhpfxolqse',}, 
          { positions: [ { i: 0, j: 1 },  ], css_id: 'tinytable_css_ga1k6oai9bfmvdqd7b0p',}, 
          { positions: [ { i: 6, j: 0 },  ], css_id: 'tinytable_css_71f9u66wdkurs6i4o61o',}, 
          { positions: [ { i: 4, j: 0 },  ], css_id: 'tinytable_css_tzbcg35qhhp8nn1h3om2',}, 
          { positions: [ { i: 1, j: 0 }, { i: 2, j: 0 }, { i: 3, j: 0 }, { i: 5, j: 0 },  ], css_id: 'tinytable_css_z0r7rdkptijg8dhbn5zb',}, 
          { positions: [ { i: 0, j: 0 },  ], css_id: 'tinytable_css_gm1vsh2qx8ptnmpm92rt',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_t01dzq4ydfz6ixwi0s8j(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_1g5e7ud9dvck60yw7das, .table th.tinytable_css_1g5e7ud9dvck60yw7das { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_atudhx2pi1wrup2ddz40, .table th.tinytable_css_atudhx2pi1wrup2ddz40 { text-align: center; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_ufm9qna3kfwhpfxolqse, .table th.tinytable_css_ufm9qna3kfwhpfxolqse { text-align: center; }
      .table td.tinytable_css_ga1k6oai9bfmvdqd7b0p, .table th.tinytable_css_ga1k6oai9bfmvdqd7b0p { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_71f9u66wdkurs6i4o61o, .table th.tinytable_css_71f9u66wdkurs6i4o61o { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_tzbcg35qhhp8nn1h3om2, .table th.tinytable_css_tzbcg35qhhp8nn1h3om2 { text-align: left; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_z0r7rdkptijg8dhbn5zb, .table th.tinytable_css_z0r7rdkptijg8dhbn5zb { text-align: left; }
      .table td.tinytable_css_gm1vsh2qx8ptnmpm92rt, .table th.tinytable_css_gm1vsh2qx8ptnmpm92rt { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_t01dzq4ydfz6ixwi0s8j" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing='true'>
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">(1)</th>
              </tr>
        </thead>
        <tfoot><tr><td colspan='2'>+ p < 0.1, * p < 0.05, ** p < 0.01, *** p < 0.001</td></tr></tfoot>
        <tbody>
                <tr>
                  <td>切片</td>
                  <td>7.136***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.044)</td>
                </tr>
                <tr>
                  <td>年齢</td>
                  <td>0.004***</td>
                </tr>
                <tr>
                  <td></td>
                  <td>(0.001)</td>
                </tr>
                <tr>
                  <td>Num.Obs.</td>
                  <td>2728</td>
                </tr>
                <tr>
                  <td>R2</td>
                  <td>0.007</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
<p>このように各変数がそれぞれ何の変数なのか名前をつけてやると、読む人にとって見やすい表になる。</p>
</div>
<div id="regression_basic_export" class="section level2 hasAnchor" number="7.7">
<h2><span class="header-section-number">7.7</span> 結果をファイルに書き出す<a href="regression_basic.html#regression_basic_export" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="wordファイルに書き出す" class="section level3 hasAnchor" number="7.7.1">
<h3><span class="header-section-number">7.7.1</span> Wordファイルに書き出す<a href="#word%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%99" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>第5章、第6章と同様、回帰分析についても結果をWordに書き出すことができる。<code>flextable</code>パッケージを読み込んでおいた状態で（この章では冒頭ですでに読み込んでおいた）、上記の<code>modelsummary()</code>のコードに<code>output = "flextable"</code>というオプションをつけて、<code>save_as_docx()</code>を実行することで、Wordファイルに結果を書き出すことができる。</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="regression_basic.html#cb306-1" tabindex="-1"></a><span class="fu">library</span>(flextable) <span class="co"># もし読み込んでいない場合は実行</span></span>
<span id="cb306-2"><a href="regression_basic.html#cb306-2" tabindex="-1"></a></span>
<span id="cb306-3"><a href="regression_basic.html#cb306-3" tabindex="-1"></a><span class="fu">modelsummary</span>(<span class="fu">list</span>(reg_res),</span>
<span id="cb306-4"><a href="regression_basic.html#cb306-4" tabindex="-1"></a>         <span class="at">stars =</span> <span class="cn">TRUE</span>, <span class="co"># 有意水準を示す印をつける</span></span>
<span id="cb306-5"><a href="regression_basic.html#cb306-5" tabindex="-1"></a>         <span class="at">coef_map =</span> <span class="fu">c</span>(<span class="st">&quot;(Intercept)&quot;</span> <span class="ot">=</span> <span class="st">&quot;切片&quot;</span>,</span>
<span id="cb306-6"><a href="regression_basic.html#cb306-6" tabindex="-1"></a>                         <span class="st">&quot;age&quot;</span> <span class="ot">=</span> <span class="st">&quot;年齢&quot;</span>), <span class="co"># 各変数に名前をつける</span></span>
<span id="cb306-7"><a href="regression_basic.html#cb306-7" tabindex="-1"></a>         <span class="at">gof_map =</span> <span class="fu">c</span>(<span class="st">&quot;nobs&quot;</span>, <span class="st">&quot;r.squared&quot;</span>),</span>
<span id="cb306-8"><a href="regression_basic.html#cb306-8" tabindex="-1"></a>         <span class="at">output =</span> <span class="st">&quot;flextable&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb306-9"><a href="regression_basic.html#cb306-9" tabindex="-1"></a>  <span class="fu">save_as_docx</span>(<span class="at">path =</span> <span class="st">&quot;results/regression.docx&quot;</span>) <span class="co"># 出力先のファイル名をつける</span></span></code></pre></div>
<p><code>as_flex_table() %&gt;% save_as_docs(path = "xxx.docx")</code>を使っていた第5章、第6章とは少し違う点に注意。多少の手直しが必要かもしれないが、きれいな回帰分析の表をWordファイルに書き出すことができる。</p>
</div>
<div id="regression_output_pptx" class="section level3 hasAnchor" number="7.7.2">
<h3><span class="header-section-number">7.7.2</span> PowerPointファイルに書き出す<a href="regression_basic.html#regression_output_pptx" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>結果をPowerPointに書き出すこともできる。この場合は、末尾の拡張子を「.pptx」に変えるとよい。</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="regression_basic.html#cb307-1" tabindex="-1"></a><span class="fu">library</span>(flextable) <span class="co"># もし読み込んでいない場合は実行</span></span>
<span id="cb307-2"><a href="regression_basic.html#cb307-2" tabindex="-1"></a></span>
<span id="cb307-3"><a href="regression_basic.html#cb307-3" tabindex="-1"></a><span class="fu">modelsummary</span>(<span class="fu">list</span>(reg_res),</span>
<span id="cb307-4"><a href="regression_basic.html#cb307-4" tabindex="-1"></a>         <span class="at">stars =</span> <span class="cn">TRUE</span>, <span class="co"># 有意水準を示す印をつける</span></span>
<span id="cb307-5"><a href="regression_basic.html#cb307-5" tabindex="-1"></a>         <span class="at">coef_map =</span> <span class="fu">c</span>(<span class="st">&quot;(Intercept)&quot;</span> <span class="ot">=</span> <span class="st">&quot;切片&quot;</span>,</span>
<span id="cb307-6"><a href="regression_basic.html#cb307-6" tabindex="-1"></a>                         <span class="st">&quot;age&quot;</span> <span class="ot">=</span> <span class="st">&quot;年齢&quot;</span>), <span class="co"># 各変数に名前をつける</span></span>
<span id="cb307-7"><a href="regression_basic.html#cb307-7" tabindex="-1"></a>         <span class="at">gof_map =</span> <span class="fu">c</span>(<span class="st">&quot;nobs&quot;</span>, <span class="st">&quot;r.squared&quot;</span>), <span class="co"># サンプルサイズと決定係数のみ記載する</span></span>
<span id="cb307-8"><a href="regression_basic.html#cb307-8" tabindex="-1"></a>         <span class="at">output =</span> <span class="st">&quot;flextable&quot;</span>) <span class="sc">%&gt;%</span>  <span class="co"># 出力先のファイル名をつける（pptx）</span></span>
<span id="cb307-9"><a href="regression_basic.html#cb307-9" tabindex="-1"></a>  <span class="fu">save_as_pptx</span>(<span class="at">path =</span> <span class="st">&quot;results/regression.pptx&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="練習問題-2" class="section level2 hasAnchor" number="7.8">
<h2><span class="header-section-number">7.8</span> 練習問題<a href="#%E7%B7%B4%E7%BF%92%E5%95%8F%E9%A1%8C-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li>賃金（<code>wage</code>）を従属変数、両親の学歴（<code>parenteduc</code>）を独立変数とする回帰分析を推定し、結果を表示してください。</li>
<li>主観的健康度（<code>health</code>）を従属変数、年齢と年齢2乗を独立変数とする回帰分析を推定し、結果を表示してください。</li>
<li>職業（<code>occupation</code>）が「管理職」であれば1、それ以外であれば0となるダミー変数（<code>manager</code>という名前をつけてください）を作成してください。また、性別（<code>gender</code>）が「女性」であれば1、「男性」であれば0となるダミー変数（<code>female_d</code>という名前をつけてください）を作成してください。</li>
<li>管理職か否か（<code>manager</code>）を従属変数、女性ダミー（<code>female_d</code>）を独立変数とする回帰分析を推定し、結果を表示してください。</li>
</ol>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="16">
<li id="fn16"><p>今回のような場合を線形回帰分析 Linear regressionということもある。<a href="regression_basic.html#fnref16" class="footnote-back">↩︎</a></p></li>
<li id="fn17"><p>lmというのはlinear modelの頭文字を取ったものである。<a href="regression_basic.html#fnref17" class="footnote-back">↩︎</a></p></li>
<li id="fn18"><p>正確には、係数 - 0を標準誤差で割ることでt値を求める。自由度df（N - 推定した係数の個数）のt分布のもとで、t値の絶対値が得られたt値よりも極端な値になる確率を計算したものがここで表示されているp値である。<a href="regression_basic.html#fnref18" class="footnote-back">↩︎</a></p></li>
<li id="fn19"><p>%どうしの差を指すときには「%ポイント」という表現を使う。たとえば、2020年1月の日本における完全失業率は2.4%であったが、同年12月には3.0%に上昇した。このときには「0.6%上昇した」というのではなく「0.6%ポイント上昇した」という。なぜなら、「0.6%上昇した」というと、2.4%を基準にしてその0.6%分（つまり、2.4×0.006 = 0.0144 %）だけ上昇したということなのか、それとも、2.4%に 0.6%を足した値になったということなのかがわかりにくいからである。<a href="regression_basic.html#fnref19" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tabulate.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="regression_advanced.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
